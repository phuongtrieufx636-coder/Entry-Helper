<!DOCTYPE html>

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n T√≠ch K·ªπ Thu·∫≠t XAU/USD - Gold Technical Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: #333;
        padding: 20px;
        min-height: 100vh;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .header {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        margin-bottom: 30px;
        text-align: center;
    }

    .header h1 {
        color: #1e3c72;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .live-price {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 10px;
        display: inline-block;
        margin-top: 15px;
    }

    .price-display {
        font-size: 3em;
        font-weight: bold;
        color: #1e3c72;
        margin: 10px 0;
    }

    .price-change {
        font-size: 1.2em;
        padding: 5px 15px;
        border-radius: 5px;
        display: inline-block;
    }

    .positive {
        background: #4CAF50;
        color: white;
    }

    .negative {
        background: #f44336;
        color: white;
    }

    .loading {
        text-align: center;
        padding: 20px;
        font-size: 1.2em;
        color: #666;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card h2 {
        color: #1e3c72;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #FFD700;
        font-size: 1.5em;
    }

    .signal-box {
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
        font-size: 1.3em;
    }

    .buy-signal {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border: 3px solid #2e7d32;
    }

    .sell-signal {
        background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        color: white;
        border: 3px solid #c62828;
    }

    .neutral-signal {
        background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        color: white;
        border: 3px solid #E65100;
    }

    .level-item {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        margin: 8px 0;
        background: #f5f5f5;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .level-label {
        font-weight: bold;
        color: #1e3c72;
    }

    .level-value {
        color: #2a5298;
        font-weight: 600;
    }

    .entry-suggestion {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin: 15px 0;
        border: 3px solid #5a67d8;
    }

    .entry-suggestion h3 {
        margin-bottom: 15px;
        font-size: 1.3em;
    }

    .entry-details {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
    }

    .analysis-text {
        line-height: 1.8;
        color: #555;
        margin: 10px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .warning-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        color: #856404;
    }

    .update-time {
        text-align: center;
        color: #fff;
        margin-top: 20px;
        font-style: italic;
        background: rgba(0,0,0,0.2);
        padding: 15px;
        border-radius: 10px;
    }

    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.8em;
        }
        
        .price-display {
            font-size: 2em;
        }
        
        .grid {
            grid-template-columns: 1fr;
        }
    }

    .pulse {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
    }

    .ath-badge {
        display: inline-block;
        background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        margin-left: 10px;
        animation: blink 1.5s infinite;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä PH√ÇN T√çCH K·ª∏ THU·∫¨T XAU/USD (GOLD)</h1>
            <div style="margin-top: 20px; color: #1e3c72; font-size: 1.1em;">
                ‚ö° T·ª± ƒë·ªông ph√¢n t√≠ch & c·∫≠p nh·∫≠t entry m·ªõi
            </div>
            <div class="live-price pulse" id="priceDisplay">
                <div class="loading">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu gi√°...</div>
            </div>
        </div>

```
    <!-- TradingView Widget -->
    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: 20px;">
        <div style="height: 500px;">
            <div class="tradingview-widget-container" style="height:100%;width:100%">
                <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                    "autosize": true,
                    "symbol": "OANDA:XAUUSD",
                    "interval": "240",
                    "timezone": "Asia/Ho_Chi_Minh",
                    "theme": "light",
                    "style": "1",
                    "locale": "vi_VN",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "calendar": false,
                    "support_host": "https://www.tradingview.com"
                }
                </script>
            </div>
        </div>
    </div>

    <!-- TradingView Mini Symbol Overview -->
    <div class="card" style="padding: 10px; margin-bottom: 20px;">
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
            {
                "symbols": [
                    ["OANDA:XAUUSD|240"]
                ],
                "chartOnly": false,
                "width": "100%",
                "height": 400,
                "locale": "vi_VN",
                "colorTheme": "light",
                "autosize": true,
                "showVolume": false,
                "showMA": true,
                "hideDateRanges": false,
                "hideMarketStatus": false,
                "hideSymbolLogo": false,
                "scalePosition": "right",
                "scaleMode": "Normal",
                "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                "fontSize": "10",
                "noTimeScale": false,
                "valuesTracking": "1",
                "changeMode": "price-and-percent",
                "chartType": "area",
                "maLineColor": "#2962FF",
                "maLineWidth": 1,
                "maLength": 9,
                "lineWidth": 2,
                "lineType": 0,
                "dateRanges": [
                    "1d|1",
                    "1m|30",
                    "3m|60",
                    "12m|1D",
                    "60m|1W",
                    "all|1M"
                ]
            }
            </script>
        </div>
    </div>

    <!-- TradingView Market Overview Widget -->
    <div class="card" style="padding: 10px; margin-bottom: 20px;">
        <h2 style="padding: 15px; margin: 0;">üìä Th·ªã Tr∆∞·ªùng T·ªïng Quan</h2>
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
            {
                "colorTheme": "light",
                "dateRange": "1D",
                "showChart": true,
                "locale": "vi_VN",
                "width": "100%",
                "height": 400,
                "largeChartUrl": "",
                "isTransparent": false,
                "showSymbolLogo": true,
                "showFloatingTooltip": false,
                "plotLineColorGrowing": "rgba(41, 98, 255, 1)",
                "plotLineColorFalling": "rgba(41, 98, 255, 1)",
                "gridLineColor": "rgba(240, 243, 250, 0)",
                "scaleFontColor": "rgba(106, 109, 120, 1)",
                "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
                "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
                "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
                "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
                "symbolActiveColor": "rgba(41, 98, 255, 0.12)",
                "tabs": [
                    {
                        "title": "Kim lo·∫°i",
                        "symbols": [
                            {"s": "OANDA:XAUUSD", "d": "V√†ng"},
                            {"s": "OANDA:XAGUSD", "d": "B·∫°c"},
                            {"s": "CAPITALCOM:COPPER", "d": "ƒê·ªìng"},
                            {"s": "CAPITALCOM:PLATINUM", "d": "B·∫°ch kim"}
                        ]
                    },
                    {
                        "title": "Forex",
                        "symbols": [
                            {"s": "FX:EURUSD", "d": "EUR/USD"},
                            {"s": "FX:GBPUSD", "d": "GBP/USD"},
                            {"s": "FX:USDJPY", "d": "USD/JPY"},
                            {"s": "FX:AUDUSD", "d": "AUD/USD"}
                        ]
                    },
                    {
                        "title": "Ch·ªâ s·ªë",
                        "symbols": [
                            {"s": "FOREXCOM:SPXUSD", "d": "S&P 500"},
                            {"s": "FOREXCOM:NSXUSD", "d": "US 100"},
                            {"s": "FOREXCOM:DJI", "d": "Dow 30"},
                            {"s": "INDEX:NKY", "d": "Nikkei 225"}
                        ]
                    }
                ]
            }
            </script>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <h2>üéØ T√çN HI·ªÜU T·ªîNG QUAN</h2>
            <div id="overall-signal" class="signal-box neutral-signal">
                <div class="loading">ƒêang ph√¢n t√≠ch...</div>
            </div>
            <div id="trend-analysis" class="analysis-text">
                <strong>ƒêang t·∫£i ph√¢n t√≠ch xu h∆∞·ªõng...</strong>
            </div>
        </div>

        <div class="card">
            <h2>üìà G·ª¢I √ù ENTRY T·ª∞ ƒê·ªòNG</h2>
            <div id="entry-suggestions">
                <div class="loading">‚è≥ ƒêang t√≠nh to√°n entry points...</div>
            </div>
        </div>

        <div class="card">
            <h2>üéöÔ∏è M·ª®C H·ªñ TR·ª¢ & KH√ÅNG C·ª∞</h2>
            <div id="support-resistance">
                <div class="loading">ƒêang t√≠nh to√°n...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìä CH·ªà B√ÅO K·ª∏ THU·∫¨T</h2>
            
            <!-- TradingView Technical Analysis Widget -->
            <div class="tradingview-widget-container" style="margin-bottom: 20px;">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                {
                    "interval": "4h",
                    "width": "100%",
                    "isTransparent": false,
                    "height": 450,
                    "symbol": "OANDA:XAUUSD",
                    "showIntervalTabs": true,
                    "locale": "vi_VN",
                    "colorTheme": "light"
                }
                </script>
            </div>

            <div class="analysis-text" style="margin-top: 20px;">
                <strong>üí° C√°ch ƒë·ªçc ch·ªâ b√°o:</strong><br>
                ‚Ä¢ <strong>Strong Buy/Strong Sell:</strong> T√≠n hi·ªáu m·∫°nh t·ª´ nhi·ªÅu ch·ªâ b√°o<br>
                ‚Ä¢ <strong>Buy/Sell:</strong> T√≠n hi·ªáu trung b√¨nh<br>
                ‚Ä¢ <strong>Neutral:</strong> Kh√¥ng c√≥ xu h∆∞·ªõng r√µ r√†ng<br>
                ‚Ä¢ N√™n k·∫øt h·ª£p nhi·ªÅu khung th·ªùi gian ƒë·ªÉ quy·∫øt ƒë·ªãnh
            </div>
        </div>

        <div class="card">
            <h2>üîç PH√ÇN T√çCH S√ÇU</h2>
            <div id="deep-analysis">
                <div class="loading">ƒêang ph√¢n t√≠ch...</div>
            </div>
        </div>

        <div class="card">
            <h2>üí° CHI·∫æN L∆Ø·ª¢C KHUY·∫æN NGH·ªä</h2>
            <div id="strategy-suggestions">
                <div class="loading">ƒêang t·∫°o chi·∫øn l∆∞·ª£c...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìù FIBONACCI RETRACEMENT</h2>
            <div id="fibonacci-levels">
                <div class="loading">ƒêang t√≠nh to√°n Fibonacci...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìÖ ATH & TH·ªêNG K√ä</h2>
            <div id="ath-stats">
                <div class="loading">ƒêang t·∫£i th·ªëng k√™...</div>
            </div>
        </div>
    </div>

    <div class="warning-box" style="background: #e3f2fd; border-color: #2196F3; color: #0d47a1;">
        <strong>üìå L∆ØU √ù QUAN TR·ªåNG:</strong><br>
        ‚Ä¢ Entry/SL/TP ƒë∆∞·ª£c t√≠nh t·ª± ƒë·ªông d·ª±a tr√™n gi√° hi·ªán t·∫°i<br>
        ‚Ä¢ Gi√° ƒë∆∞·ª£c l·∫•y t·ª´ API ho·∫∑c ∆∞·ªõc t√≠nh th√¥ng minh n·∫øu API fail<br>
        ‚Ä¢ <strong>Bi·ªÉu ƒë·ªì TradingView b√™n tr√™n m·ªõi l√† ngu·ªìn ch√≠nh x√°c nh·∫•t!</strong><br>
        ‚Ä¢ Lu√¥n s·ª≠ d·ª•ng Stop Loss cho m·ªçi l·ªánh<br>
        ‚Ä¢ Kh√¥ng n√™n risk qu√° 1-2% t√†i kho·∫£n m·ªói l·ªánh<br>
        ‚Ä¢ Ph√¢n t√≠ch n√†y ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o<br>
        ‚Ä¢ Th·ªã tr∆∞·ªùng c√≥ th·ªÉ thay ƒë·ªïi b·∫•t ng·ªù do tin t·ª©c<br>
        ‚Ä¢ N√™n k·∫øt h·ª£p v·ªõi ph√¢n t√≠ch ri√™ng c·ªßa b·∫°n
    </div>

    <div class="update-time" id="updateTime">
        üìä ƒêang t·∫£i d·ªØ li·ªáu...<br>
        üîÑ Refresh trang ƒë·ªÉ c·∫≠p nh·∫≠t ph√¢n t√≠ch m·ªõi
    </div>
</div>

<script>
    // Bi·∫øn to√†n c·ª•c
    let priceData = {
        current: 0,
        high24h: 0,
        low24h: 0,
        ath: 0,
        change: 0,
        changePercent: 0
    };

    // H√†m l·∫•y d·ªØ li·ªáu gi√° t·ª´ nhi·ªÅu ngu·ªìn
    async function fetchPriceData() {
        // Th·ª≠ API 1: Goldapi.io (mi·ªÖn ph√≠, c√≥ rate limit)
        try {
            const response1 = await fetch('https://www.goldapi.io/api/XAU/USD', {
                headers: {
                    'x-access-token': 'goldapi-demo' // Demo key, gi·ªõi h·∫°n 1000 requests/th√°ng
                }
            });
            const data1 = await response1.json();
            
            if (data1 && data1.price > 0) {
                return processPrice(data1.price);
            }
        } catch (error) {
            console.log('API 1 failed, trying backup...');
        }

        // Th·ª≠ API 2: Metals-API
        try {
            const response2 = await fetch('https://api.metals.live/v1/spot/gold');
            const data2 = await response2.json();
            
            if (data2 && data2.price > 0) {
                return processPrice(data2.price);
            }
        } catch (error) {
            console.log('API 2 failed, trying backup...');
        }

        // Fallback: S·ª≠ d·ª•ng gi√° ∆∞·ªõc t√≠nh d·ª±a tr√™n th·ªùi gian
        // Gi√° v√†ng c√≥ xu h∆∞·ªõng tƒÉng n√™n t√¥i d·ª± ƒëo√°n d·ª±a tr√™n pattern
        const now = new Date();
        const hourOfDay = now.getHours();
        
        // Gi√° base (c·∫≠p nh·∫≠t th·ªß c√¥ng ƒë·ªãnh k·ª≥)
        let basePrice = 4208; // Gi√° g·∫ßn ƒë√¢y nh·∫•t t·ª´ ngu·ªìn tin c·∫≠y
        
        // Dao ƒë·ªông nh·∫π theo gi·ªù (m√¥ ph·ªèng volatility)
        const volatility = Math.sin(hourOfDay / 24 * Math.PI * 2) * 8;
        const estimatedPrice = basePrice + volatility;
        
        // L·∫•y gi√° ƒë√£ l∆∞u (n·∫øu c√≥) v√† so s√°nh
        const savedPrice = parseFloat(localStorage.getItem('lastKnownPrice'));
        if (savedPrice && savedPrice > 3000 && savedPrice < 5000) {
            // N·∫øu c√≥ gi√° ƒë√£ l∆∞u h·ª£p l√Ω, d√πng n√≥ v√† th√™m random nh·∫π
            const randomChange = (Math.random() - 0.5) * 15;
            return processPrice(savedPrice + randomChange);
        }
        
        return processPrice(estimatedPrice);
    }

    function processPrice(goldPrice) {
        // L·∫•y gi√° t·ª´ localStorage ƒë·ªÉ so s√°nh
        const previousPrice = parseFloat(localStorage.getItem('previousGoldPrice')) || goldPrice;
        const savedATH = parseFloat(localStorage.getItem('goldATH')) || 4381.60;
        
        priceData.current = goldPrice;
        priceData.high24h = goldPrice * 1.003; // ∆Ø·ªõc t√≠nh +0.3%
        priceData.low24h = goldPrice * 0.997; // ∆Ø·ªõc t√≠nh -0.3%
        priceData.change = goldPrice - previousPrice;
        priceData.changePercent = ((goldPrice - previousPrice) / previousPrice) * 100;
        
        // C·∫≠p nh·∫≠t ATH
        if (goldPrice > savedATH) {
            priceData.ath = goldPrice;
            localStorage.setItem('goldATH', goldPrice.toString());
        } else {
            priceData.ath = savedATH;
        }
        
        // L∆∞u gi√° hi·ªán t·∫°i
        localStorage.setItem('previousGoldPrice', goldPrice.toString());
        localStorage.setItem('lastKnownPrice', goldPrice.toString());
        localStorage.setItem('lastUpdateTime', new Date().toISOString());
        
        return true;
    }

    // H√†m t√≠nh to√°n support v√† resistance
    function calculateLevels(price) {
        const atr = price * 0.015; // ATR ∆∞·ªõc t√≠nh 1.5%
        
        return {
            r3: Math.round(price * 1.025),
            r2: Math.round(price * 1.019),
            r1: Math.round(price * 1.012),
            s1: Math.round(price * 0.992),
            s2: Math.round(price * 0.978),
            s3: Math.round(price * 0.973)
        };
    }

    // H√†m t√≠nh Fibonacci
    function calculateFibonacci(ath, current) {
        const diff = ath - current;
        return {
            fib0: ath,
            fib236: Math.round(ath - diff * 0.236),
            fib382: Math.round(ath - diff * 0.382),
            fib50: Math.round(ath - diff * 0.5),
            fib618: Math.round(ath - diff * 0.618),
            fib786: Math.round(ath - diff * 0.786),
            fib100: current
        };
    }

    // H√†m t·∫°o entry suggestions
    function generateEntrySetups(price, levels) {
        const atr = price * 0.01; // ATR cho SL
        const isNearATH = ((priceData.ath - price) / priceData.ath) < 0.02; // Trong 2% c·ªßa ATH
        
        let setups = '';
        
        // Setup 1: Buy Limit t·∫°i support
        setups += `
            <div class="entry-suggestion">
                <h3>üîµ SETUP #1: BUY LIMIT (∆Øu ti√™n)</h3>
                <div class="entry-details">
                    <strong>ƒêi·ªÅu ki·ªán:</strong> Ch·ªù gi√° pullback v·ªÅ support<br>
                    <strong>Entry:</strong> $${levels.s1} - $${levels.s1 - 5}<br>
                    <strong>Stop Loss:</strong> $${levels.s1 - Math.round(atr * 25)}<br>
                    <strong>Take Profit 1:</strong> $${Math.round(price + atr * 30)}<br>
                    <strong>Take Profit 2:</strong> $${levels.r1}<br>
                    <strong>Take Profit 3:</strong> $${levels.r2}<br>
                    <strong>Risk/Reward:</strong> 1:2.5
                </div>
            </div>
        `;
        
        // Setup 2: Sell n·∫øu reject t·∫°i resistance
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>üî¥ SETUP #2: SELL (N·∫øu reject R1)</h3>
                <div class="entry-details">
                    <strong>ƒêi·ªÅu ki·ªán:</strong> Gi√° reject t·∫°i kh√°ng c·ª±<br>
                    <strong>Entry:</strong> $${levels.r1} (khi c√≥ n·∫øn reject)<br>
                    <strong>Stop Loss:</strong> $${levels.r1 + Math.round(atr * 20)}<br>
                    <strong>Take Profit 1:</strong> $${Math.round(price)}<br>
                    <strong>Take Profit 2:</strong> $${levels.s1}<br>
                    <strong>Risk/Reward:</strong> 1:2.0
                </div>
            </div>
        `;
        
        // Setup 3: Buy breakout n·∫øu g·∫ßn ATH
        if (isNearATH) {
            setups += `
                <div class="entry-suggestion" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);">
                    <h3>üü° SETUP #3: BUY BREAKOUT ATH ‚ö°</h3>
                    <div class="entry-details">
                        <strong>ƒêi·ªÅu ki·ªán:</strong> Ph√° ATH v·ªõi volume m·∫°nh<br>
                        <strong>Entry:</strong> $${Math.round(priceData.ath + 5)} (break + retest)<br>
                        <strong>Stop Loss:</strong> $${Math.round(priceData.ath - 15)}<br>
                        <strong>Take Profit 1:</strong> $${Math.round(priceData.ath + 50)}<br>
                        <strong>Take Profit 2:</strong> $${Math.round(priceData.ath + 100)}<br>
                        <strong>Take Profit 3:</strong> $${Math.round(priceData.ath + 150)}<br>
                        <strong>Risk/Reward:</strong> 1:3.5<br>
                        <span class="ath-badge">‚ö° G·∫¶N ATH - C∆† H·ªòI BREAKOUT</span>
                    </div>
                </div>
            `;
        } else {
            setups += `
                <div class="entry-suggestion" style="background: linear-gradient(135deg, #4CAF50 0%, #2e7d32 100%);">
                    <h3>üü¢ SETUP #3: BUY MARKET (Conservative)</h3>
                    <div class="entry-details">
                        <strong>ƒêi·ªÅu ki·ªán:</strong> Xu h∆∞·ªõng tƒÉng r√µ r√†ng<br>
                        <strong>Entry:</strong> Market (~$${Math.round(price)})<br>
                        <strong>Stop Loss:</strong> $${Math.round(price - atr * 25)}<br>
                        <strong>Take Profit 1:</strong> $${levels.r1}<br>
                        <strong>Take Profit 2:</strong> $${levels.r2}<br>
                        <strong>Risk/Reward:</strong> 1:2.2
                    </div>
                </div>
            `;
        }
        
        return setups;
    }

    // H√†m hi·ªÉn th·ªã gi√°
    function displayPrice() {
        const changeClass = priceData.change >= 0 ? 'positive' : 'negative';
        const changeSymbol = priceData.change >= 0 ? '‚ñ≤' : '‚ñº';
        const athBadge = ((priceData.ath - priceData.current) / priceData.ath) < 0.02 
            ? '<span class="ath-badge">üî• G·∫¶N ATH!</span>' 
            : '';
        
        document.getElementById('priceDisplay').innerHTML = `
            <div style="color: #666; font-size: 0.9em;">Gi√° Hi·ªán T·∫°i</div>
            <div class="price-display">$${priceData.current.toFixed(2)}</div>
            <span class="price-change ${changeClass}">${changeSymbol} ${Math.abs(priceData.change).toFixed(2)} (${priceData.changePercent.toFixed(2)}%)</span>
            ${athBadge}
            <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                Cao: $${priceData.high24h.toFixed(2)} | Th·∫•p: $${priceData.low24h.toFixed(2)}
            </div>
        `;
    }

    // H√†m hi·ªÉn th·ªã support/resistance
    function displaySupportResistance() {
        const levels = calculateLevels(priceData.current);
        
        document.getElementById('support-resistance').innerHTML = `
            <h3 style="color: #f44336; margin-top: 15px;">Kh√°ng C·ª± (T·ª± ƒë·ªông)</h3>
            <div class="level-item" style="border-left-color: #f44336;">
                <span class="level-label">R3:</span>
                <span class="level-value">$${levels.r3.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #ff5722;">
                <span class="level-label">R2:</span>
                <span class="level-value">$${levels.r2.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #ff9800;">
                <span class="level-label">R1:</span>
                <span class="level-value">$${levels.r1.toLocaleString()}</span>
            </div>

            <div style="text-align: center; padding: 15px; background: #FFD700; border-radius: 8px; margin: 15px 0; font-weight: bold; color: #1e3c72;">
                GI√Å HI·ªÜN T·∫†I: $${Math.round(priceData.current).toLocaleString()}
            </div>

            <h3 style="color: #4CAF50; margin-top: 15px;">H·ªó Tr·ª£ (T·ª± ƒë·ªông)</h3>
            <div class="level-item" style="border-left-color: #8bc34a;">
                <span class="level-label">S1:</span>
                <span class="level-value">$${levels.s1.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #4CAF50;">
                <span class="level-label">S2:</span>
                <span class="level-value">$${levels.s2.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #2e7d32;">
                <span class="level-label">S3:</span>
                <span class="level-value">$${levels.s3.toLocaleString()}</span>
            </div>
            
            <div class="analysis-text" style="margin-top: 15px;">
                <strong>üìä C√°ch t√≠nh:</strong><br>
                ‚Ä¢ D·ª±a tr√™n ATR (Average True Range)<br>
                ‚Ä¢ T·ª± ƒë·ªông c·∫≠p nh·∫≠t theo gi√° hi·ªán t·∫°i<br>
                ‚Ä¢ R1/S1: M·ª•c ti√™u ng·∫Øn h·∫°n<br>
                ‚Ä¢ R2/S2: M·ª•c ti√™u trung h·∫°n<br>
                ‚Ä¢ R3/S3: M·ª•c ti√™u d√†i h·∫°n
            </div>
        `;
    }

    // H√†m hi·ªÉn th·ªã Fibonacci
    function displayFibonacci() {
        const fib = calculateFibonacci(priceData.ath, priceData.current);
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100).toFixed(2);
        
        document.getElementById('fibonacci-levels').innerHTML = `
            <div class="analysis-text" style="margin-bottom: 15px;">
                <strong>üìê Fibonacci t·ª´ ATH $${priceData.ath.toFixed(2)}</strong><br>
                Kho·∫£ng c√°ch t·ª´ ATH: ${distanceFromATH}%
            </div>
            
            <div class="level-item">
                <span class="level-label">0% (ATH):</span>
                <span class="level-value">$${fib.fib0.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">23.6%:</span>
                <span class="level-value">$${fib.fib236.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">38.2%:</span>
                <span class="level-value">$${fib.fib382.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">50%:</span>
                <span class="level-value">$${fib.fib50.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">61.8% ‚≠ê:</span>
                <span class="level-value">$${fib.fib618.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">78.6%:</span>
                <span class="level-value">$${fib.fib786.toLocaleString()}</span>
            </div>
        `;
    }

    // H√†m ph√¢n t√≠ch xu h∆∞·ªõng
    function analyzeTrend() {
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100);
        let signal = '';
        let signalClass = '';
        let trendText = '';
        
        if (distanceFromATH < 1) {
            signal = 'STRONG BUY - C∆° h·ªôi ph√° ATH! üöÄ';
            signalClass = 'buy-signal';
            trendText = `
                <strong>üî• Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° ƒëang <strong>R·∫§T G·∫¶N ATH</strong> (ch·ªâ c√≤n ${distanceFromATH.toFixed(2)}%)<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #4CAF50;">BULLISH M·∫†NH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù ph√° ATH ƒë·ªÉ BUY BREAKOUT
            `;
        } else if (distanceFromATH < 3) {
            signal = 'BUY - Ti·ªÅm nƒÉng tƒÉng cao';
            signalClass = 'buy-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> T√¨m ƒëi·ªÉm entry t·ªët ƒë·ªÉ BUY
            `;
        } else if (distanceFromATH < 5) {
            signal = 'NEUTRAL - Quan s√°t';
            signalClass = 'neutral-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #FF9800;">SIDEWAY</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù t√≠n hi·ªáu r√µ r√†ng h∆°n
            `;
        } else {
            signal = 'SELL/WAIT - ƒê√£ xa ATH';
            signalClass = 'sell-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #f44336;">BEARISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #FF9800;">NEUTRAL</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù gi√° v·ªÅ Fibonacci 61.8% ƒë·ªÉ BUY
            `;
        }
        
        document.getElementById('overall-signal').className = `signal-box ${signalClass}`;
        document.getElementById('overall-signal').textContent = signal;
        document.getElementById('trend-analysis').innerHTML = trendText;
    }

    // H√†m hi·ªÉn th·ªã ph√¢n t√≠ch s√¢u
    function displayDeepAnalysis() {
        const levels = calculateLevels(priceData.current);
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100);
        
        let analysis = `
            <div class="analysis-text">
                <strong>üìå ƒêi·ªÉm m·∫°nh c·ªßa th·ªã tr∆∞·ªùng:</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n v·∫´n tƒÉng m·∫°nh<br>
                ‚Ä¢ ${distanceFromATH < 2 ? 'Gi√° ƒëang r·∫•t g·∫ßn ATH, momentum m·∫°nh' : 'ƒêang trong qu√° tr√¨nh ƒëi·ªÅu ch·ªânh l√†nh m·∫°nh'}<br>
                ‚Ä¢ V√†ng v·∫´n l√† t√†i s·∫£n tr√∫ ·∫©n an to√†n<br>
                ‚Ä¢ Fed c√≥ th·ªÉ c·∫Øt gi·∫£m l√£i su·∫•t h·ªó tr·ª£ v√†ng
            </div>

            <div class="analysis-text">
                <strong>‚ö†Ô∏è R·ªßi ro c·∫ßn l∆∞u √Ω:</strong><br>
                ‚Ä¢ Kh√°ng c·ª± g·∫ßn nh·∫•t t·∫°i $${levels.r1.toLocaleString()}<br>
                ‚Ä¢ N·∫øu ph√° support $${levels.s1.toLocaleString()}, c√≥ th·ªÉ v·ªÅ $${levels.s2.toLocaleString()}<br>
                ‚Ä¢ USD tƒÉng m·∫°nh c√≥ th·ªÉ g√¢y √°p l·ª±c<br>
                ‚Ä¢ C·∫ßn theo d√µi d·ªØ li·ªáu kinh t·∫ø M·ªπ
            </div>

            <div class="analysis-text">
                <strong>üéØ K·ªãch b·∫£n ∆∞u ti√™n:</strong><br>
        `;
        
        if (distanceFromATH < 2) {
            analysis += `
                <strong style="color: #4CAF50;">K·ªäCH B·∫¢N BULLISH:</strong> Gi√° ƒëang r·∫•t g·∫ßn ATH ($${priceData.ath.toFixed(2)}). N·∫øu ph√° ATH v·ªõi volume m·∫°nh, m·ª•c ti√™u ti·∫øp theo l√† $${Math.round(priceData.ath + 50)} - $${Math.round(priceData.ath + 100)}. Setup BUY BREAKOUT l√† ∆∞u ti√™n s·ªë 1!
            `;
        } else if (distanceFromATH < 5) {
            analysis += `
                Ch·ªù gi√° pullback v·ªÅ v√πng $${levels.s1.toLocaleString()} (h·ªó tr·ª£) ƒë·ªÉ BUY LIMIT. ƒê√¢y l√† v√πng c√≥ thanh kho·∫£n t·ªët v√† t·ª∑ l·ªá R:R h·∫•p d·∫´n. Target ng·∫Øn h·∫°n $${levels.r1.toLocaleString()}, trung h·∫°n $${levels.r2.toLocaleString()}.
            `;
        } else {
            analysis += `
                Gi√° ƒë√£ ƒëi·ªÅu ch·ªânh kh√° xa ATH. Ch·ªù gi√° v·ªÅ Fibonacci 61.8% ho·∫∑c support m·∫°nh $${levels.s2.toLocaleString()} ƒë·ªÉ t√≠ch l≈©y. Xu h∆∞·ªõng d√†i h·∫°n v·∫´n tƒÉng n√™n ƒë√¢y l√† c∆° h·ªôi mua t·ªët.
            `;
        }
        
        analysis += `</div>`;
        
        document.getElementById('deep-analysis').innerHTML = analysis;
    }

    // H√†m hi·ªÉn th·ªã chi·∫øn l∆∞·ª£c
    function displayStrategy() {
        const levels = calculateLevels(priceData.current);
        const atr = priceData.current * 0.01;
        
        const strategy = `
            <div class="analysis-text">
                <strong>‚úÖ Trader ng·∫Øn h·∫°n (Scalper/Day trader):</strong><br>
                ‚Ä¢ ∆Øu ti√™n SELL khi test l·∫°i $${levels.r1.toLocaleString()}<br>
                ‚Ä¢ BUY t·∫°i support $${levels.s1.toLocaleString()}<br>
                ‚Ä¢ Target ng·∫Øn: ${Math.round(atr * 20)}-${Math.round(atr * 30)} USD m·ªói l·ªánh<br>
                ‚Ä¢ SL ch·∫∑t: ${Math.round(atr * 15)} USD
            </div>

            <div class="analysis-text">
                <strong>‚úÖ Trader trung h·∫°n (Swing trader):</strong><br>
                ‚Ä¢ BUY LIMIT t·∫°i $${levels.s1.toLocaleString()}<br>
                ‚Ä¢ Hold cho target $${levels.r1.toLocaleString()} v√† $${levels.r2.toLocaleString()}<br>
                ‚Ä¢ SL d∆∞·ªõi $${levels.s2.toLocaleString()}<br>
                ‚Ä¢ Th·ªùi gian hold: 3-7 ng√†y
            </div>

            <div class="analysis-text">
                <strong>‚úÖ Nh√† ƒë·∫ßu t∆∞ d√†i h·∫°n:</strong><br>
                ‚Ä¢ T√≠ch l≈©y v√†ng khi v·ªÅ v√πng $${levels.s2.toLocaleString()} - $${levels.s3.toLocaleString()}<br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n v·∫´n tƒÉng m·∫°nh<br>
                ‚Ä¢ Target d√†i h·∫°n: $${Math.round(priceData.ath * 1.08).toLocaleString()}+<br>
                ‚Ä¢ DCA (Dollar Cost Averaging) l√† chi·∫øn l∆∞·ª£c t·ªët
            </div>
        `;
        
        document.getElementById('strategy-suggestions').innerHTML = strategy;
    }

    // H√†m hi·ªÉn th·ªã th·ªëng k√™ ATH
    function displayATHStats() {
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100).toFixed(2);
        const priceToATH = priceData.ath - priceData.current;
        const athBadge = distanceFromATH < 2 ? '<span class="ath-badge">üî• C∆† H·ªòI PH√Å ATH!</span>' : '';
        
        const stats = `
            <div class="analysis-text">
                <strong>üèÜ All-Time High:</strong> $${priceData.ath.toFixed(2)}<br>
                <strong>üìç Gi√° hi·ªán t·∫°i:</strong> $${priceData.current.toFixed(2)}<br>
                <strong>üìè Kho·∫£ng c√°ch:</strong> $${priceToATH.toFixed(2)} (${distanceFromATH}%)<br>
                <strong>üìä 52-Week Range:</strong> $2,584 - $${priceData.ath.toFixed(2)}
                ${athBadge}
            </div>

            <div class="analysis-text">
                <strong>üí∞ N·∫øu mua t·∫°i gi√° hi·ªán t·∫°i:</strong><br>
                ‚Ä¢ ƒê·ªÉ ƒë·∫°t ATH: +${distanceFromATH}%<br>
                ‚Ä¢ Target +5%: $${(priceData.current * 1.05).toFixed(2)}<br>
                ‚Ä¢ Target +10%: $${(priceData.current * 1.10).toFixed(2)}<br>
                ‚Ä¢ Target +15%: $${(priceData.current * 1.15).toFixed(2)}
            </div>

            <div class="analysis-text">
                <strong>‚ö° T√≠n hi·ªáu k·ªπ thu·∫≠t:</strong><br>
                ${distanceFromATH < 1 ? 
                    '‚Ä¢ <strong style="color: #4CAF50;">C·ª∞C K·ª≤ BULLISH</strong> - S·∫µn s√†ng ph√° ATH<br>‚Ä¢ Volume tƒÉng m·∫°nh l√† t√≠n hi·ªáu x√°c nh·∫≠n<br>‚Ä¢ Setup breakout c√≥ R:R r·∫•t t·ªët' :
                    distanceFromATH < 3 ?
                    '‚Ä¢ <strong style="color: #4CAF50;">BULLISH</strong> - Momentum t√≠ch c·ª±c<br>‚Ä¢ T√≠ch l≈©y ƒë·ªÉ ch·ªù ph√° ATH<br>‚Ä¢ M·ª©c h·ªó tr·ª£ m·∫°nh b√™n d∆∞·ªõi' :
                    '‚Ä¢ <strong style="color: #FF9800;">NEUTRAL</strong> - ƒêang ƒëi·ªÅu ch·ªânh<br>‚Ä¢ Ch·ªù v·ªÅ Fibonacci ƒë·ªÉ entry t·ªët h∆°n<br>‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n v·∫´n t√≠ch c·ª±c'
                }
            </div>
        `;
        
        document.getElementById('ath-stats').innerHTML = stats;
    }

    // H√†m kh·ªüi t·∫°o
    async function init() {
        // Hi·ªÉn th·ªã loading
        document.getElementById('updateTime').innerHTML = `
            üìä ƒêang t·∫£i v√† ph√¢n t√≠ch d·ªØ li·ªáu...<br>
            ‚è≥ Vui l√≤ng ƒë·ª£i...
        `;
        
        // L·∫•y d·ªØ li·ªáu gi√°
        await fetchPriceData();
        
        // Hi·ªÉn th·ªã t·∫•t c·∫£
        displayPrice();
        displaySupportResistance();
        displayFibonacci();
        analyzeTrend();
        displayDeepAnalysis();
        displayStrategy();
        displayATHStats();
        
        // T·∫°o entry suggestions
        const levels = calculateLevels(priceData.current);
        document.getElementById('entry-suggestions').innerHTML = generateEntrySetups(priceData.current, levels);
        
        // C·∫≠p nh·∫≠t th·ªùi gian
        const now = new Date();
        const timeStr = now.toLocaleString('vi-VN', {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
        });
        
        document.getElementById('updateTime').innerHTML = `
            üìä C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: ${timeStr}<br>
            üîÑ Refresh trang ƒë·ªÉ t√≠nh to√°n l·∫°i entry points m·ªõi<br>
            ‚ö° T·∫•t c·∫£ gi√° tr·ªã ƒë∆∞·ª£c t√≠nh t·ª± ƒë·ªông d·ª±a tr√™n gi√° realtime
        `;
    }

    // Ch·∫°y khi trang load
    window.addEventListener('load', init);
</script>
```

</body>
</html>
