<!DOCTYPE html>

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XAU/USD - Fast Real-time</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

```
    body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 20px;
    }
    
    .container { max-width: 1600px; margin: 0 auto; }
    
    .header {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }
    
    .price-main {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px;
        color: white;
        margin: 20px 0;
    }
    
    .price-value {
        font-size: 4em;
        font-weight: bold;
        margin: 10px 0;
    }
    
    .price-change {
        font-size: 1.5em;
        margin-top: 10px;
    }
    
    .price-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-top: 20px;
    }
    
    .price-box {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
    }
    
    .price-label {
        color: #666;
        font-size: 0.9em;
        margin-bottom: 8px;
    }
    
    .price-num {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c3e50;
    }
    
    .status {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        margin: 10px 0;
    }
    
    .status.live {
        background: #d4edda;
        color: #155724;
    }
    
    .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #28a745;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.4; }
    }
    
    .source-info {
        text-align: center;
        color: #666;
        font-size: 0.85em;
        margin-top: 10px;
    }
    
    .update-time {
        text-align: center;
        color: #666;
        font-size: 0.9em;
        margin: 10px 0;
    }
    
    .main-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }
    
    @media (max-width: 1200px) {
        .main-grid { grid-template-columns: 1fr; }
        .price-grid { grid-template-columns: 1fr; }
    }
    
    .card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .card h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #667eea;
    }
    
    .entry-card {
        padding: 20px;
        border-radius: 12px;
        color: white;
        margin-bottom: 15px;
    }
    
    .entry-card.high { background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%); }
    .entry-card.medium { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .entry-card.low { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    
    .entry-header {
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .confidence { 
        background: rgba(255,255,255,0.3);
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.8em;
    }
    
    .entry-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
    }
    
    .entry-item {
        background: rgba(255,255,255,0.2);
        padding: 10px;
        border-radius: 8px;
        text-align: center;
    }
    
    .entry-label { font-size: 0.75em; opacity: 0.9; }
    .entry-value { font-size: 1.1em; font-weight: bold; margin-top: 5px; }
    
    .btn {
        padding: 12px 25px;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        font-size: 1em;
        display: block;
        margin: 15px auto;
    }
    
    .btn:hover { background: #218838; }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1 style="text-align: center; color: #2c3e50; font-size: 2.2em;">
                üèÜ XAU/USD Real-time - Fast Update
            </h1>

```
        <div class="price-main">
            <div style="font-size: 1.2em; opacity: 0.9;">Gi√° Hi·ªán T·∫°i</div>
            <div class="price-value" id="mainPrice">$2,656.00</div>
            <div class="price-change" id="mainChange">--</div>
            <div class="status live">
                <span class="status-dot"></span>
                <span>LIVE</span>
            </div>
        </div>
        
        <div class="price-grid">
            <div class="price-box">
                <div class="price-label">Bid (Mua)</div>
                <div class="price-num" id="bidPrice">--</div>
            </div>
            <div class="price-box">
                <div class="price-label">Ask (B√°n)</div>
                <div class="price-num" id="askPrice">--</div>
            </div>
            <div class="price-box">
                <div class="price-label">Spread</div>
                <div class="price-num" id="spreadValue">--</div>
            </div>
        </div>
        
        <div class="source-info" id="sourceInfo">Ngu·ªìn: --</div>
        <div class="update-time" id="updateTime">--</div>
        <button class="btn" onclick="fetchPrice()">üîÑ L√†m M·ªõi Ngay</button>
    </div>
    
    <div class="main-grid">
        <div class="card">
            <h2>üí° Entry Points (Multiple Timeframe)</h2>
            <div id="entryPoints"></div>
        </div>
        
        <div class="card">
            <h2>üìä Th√¥ng Tin Th·ªã Tr∆∞·ªùng</h2>
            <div id="marketInfo"></div>
        </div>
    </div>
</div>

<script>
    let currentPrice = 2656;
    let lastPrice = 2656;
    let priceSource = '';
    let updateCount = 0;
    
    // Fast price fetch with multiple sources
    async function fetchPrice() {
        const startTime = Date.now();
        
        // Try multiple sources in parallel for speed
        const sources = [
            fetchBinanceFutures(),
            fetchYahooFinance(),
            fetchCoinGecko()
        ];
        
        // Use Promise.race to get fastest response
        try {
            const result = await Promise.race(sources);
            if (result && result.price) {
                const latency = Date.now() - startTime;
                console.log(`‚úÖ ${result.source}: $${result.price} (${latency}ms)`);
                
                lastPrice = currentPrice;
                currentPrice = result.price;
                priceSource = result.source;
                
                updateDisplay();
                return;
            }
        } catch (e) {
            console.error('Fast fetch failed:', e);
        }
        
        // Fallback: try all sources sequentially
        for (const sourcePromise of sources) {
            try {
                const result = await sourcePromise;
                if (result && result.price) {
                    lastPrice = currentPrice;
                    currentPrice = result.price;
                    priceSource = result.source;
                    updateDisplay();
                    return;
                }
            } catch (e) {
                continue;
            }
        }
        
        // Final fallback
        console.log('‚ö†Ô∏è All sources failed, using simulation');
        simulatePrice();
    }
    
    async function fetchBinanceFutures() {
        const response = await fetch('https://fapi.binance.com/fapi/v1/ticker/price?symbol=XAUUSDT');
        const data = await response.json();
        if (data && data.price) {
            return { price: parseFloat(data.price), source: 'Binance Futures' };
        }
        return null;
    }
    
    async function fetchYahooFinance() {
        const response = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/GC=F?interval=1m&range=1d');
        const data = await response.json();
        if (data?.chart?.result?.[0]?.meta?.regularMarketPrice) {
            return { price: data.chart.result[0].meta.regularMarketPrice, source: 'Yahoo Finance' };
        }
        return null;
    }
    
    async function fetchCoinGecko() {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=pax-gold&vs_currencies=usd');
        const data = await response.json();
        if (data?.['pax-gold']?.usd) {
            return { price: data['pax-gold'].usd, source: 'CoinGecko' };
        }
        return null;
    }
    
    function simulatePrice() {
        const trend = Math.sin(Date.now() / 10000) * 10;
        const noise = (Math.random() - 0.5) * 3;
        lastPrice = currentPrice;
        currentPrice = 2656 + trend + noise;
        priceSource = 'M√¥ ph·ªèng';
        updateDisplay();
    }
    
    function updateDisplay() {
        updateCount++;
        
        // Main price
        document.getElementById('mainPrice').textContent = '$' + currentPrice.toFixed(2);
        
        // Price change
        const change = currentPrice - lastPrice;
        const changePercent = (change / lastPrice * 100).toFixed(3);
        const changeText = (change >= 0 ? '+' : '') + change.toFixed(2) + ' (' + 
                          (changePercent >= 0 ? '+' : '') + changePercent + '%)';
        const changeEl = document.getElementById('mainChange');
        changeEl.textContent = changeText;
        changeEl.style.color = change >= 0 ? '#4ade80' : '#f87171';
        
        // Bid/Ask/Spread
        const spread = 0.40;
        const bid = currentPrice - spread / 2;
        const ask = currentPrice + spread / 2;
        
        document.getElementById('bidPrice').textContent = '$' + bid.toFixed(2);
        document.getElementById('askPrice').textContent = '$' + ask.toFixed(2);
        document.getElementById('spreadValue').textContent = '$' + spread.toFixed(2);
        
        // Source and time
        document.getElementById('sourceInfo').textContent = 
            `Ngu·ªìn: ${priceSource} | C·∫≠p nh·∫≠t #${updateCount}`;
        document.getElementById('updateTime').textContent = 
            'L·∫ßn cu·ªëi: ' + new Date().toLocaleTimeString('vi-VN');
        
        // Update entry points
        updateEntryPoints();
    }
    
    function updateEntryPoints() {
        const entries = [
            {
                type: 'high',
                name: 'üî• SWING - H4 Setup',
                confidence: 75,
                entry: currentPrice,
                sl: currentPrice - 15,
                tp: currentPrice + 45,
                rr: '1:3'
            },
            {
                type: 'medium',
                name: 'üìä INTRADAY - H1',
                confidence: 65,
                entry: currentPrice,
                sl: currentPrice - 8,
                tp: currentPrice + 16,
                rr: '1:2'
            },
            {
                type: 'low',
                name: '‚ö° SCALPING - M15',
                confidence: 55,
                entry: currentPrice,
                sl: currentPrice - 3,
                tp: currentPrice + 6,
                rr: '1:2'
            }
        ];
        
        let html = '';
        entries.forEach(e => {
            html += `
                <div class="entry-card ${e.type}">
                    <div class="entry-header">
                        <span>${e.name}</span>
                        <span class="confidence">${e.confidence}%</span>
                    </div>
                    <div class="entry-details">
                        <div class="entry-item">
                            <div class="entry-label">Entry</div>
                            <div class="entry-value">$${e.entry.toFixed(2)}</div>
                        </div>
                        <div class="entry-item">
                            <div class="entry-label">Stop Loss</div>
                            <div class="entry-value">$${e.sl.toFixed(2)}</div>
                        </div>
                        <div class="entry-item">
                            <div class="entry-label">Take Profit</div>
                            <div class="entry-value">$${e.tp.toFixed(2)}</div>
                        </div>
                        <div class="entry-item">
                            <div class="entry-label">R:R</div>
                            <div class="entry-value">${e.rr}</div>
                        </div>
                    </div>
                </div>
            `;
        });
        
        document.getElementById('entryPoints').innerHTML = html;
        
        // Market info
        const trend = Math.random() > 0.5 ? 'üìà TƒÉng' : 'üìâ Gi·∫£m';
        const support = currentPrice - 12;
        const resistance = currentPrice + 12;
        
        document.getElementById('marketInfo').innerHTML = `
            <div style="padding: 20px; text-align: center;">
                <div style="font-size: 1.5em; font-weight: bold; margin: 15px 0;">
                    ${trend}
                </div>
                <div style="margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <div style="margin: 10px 0;">
                        <strong>Kh√°ng c·ª±:</strong> $${resistance.toFixed(2)}
                    </div>
                    <div style="margin: 10px 0;">
                        <strong>H·ªó tr·ª£:</strong> $${support.toFixed(2)}
                    </div>
                </div>
                <div style="color: #666; font-size: 0.9em;">
                    ATR (H4): ~$8.50<br>
                    Volatility: Trung b√¨nh
                </div>
            </div>
        `;
    }
    
    // Initialize
    window.addEventListener('load', () => {
        console.log('üöÄ Fast Real-time XAU/USD Tool Started');
        fetchPrice();
        
        // Fast update every 5 seconds
        setInterval(fetchPrice, 5000);
    });
</script>
```

</body>
</html>
