<!DOCTYPE html>

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhÃ¢n TÃ­ch Ká»¹ Thuáº­t XAU/USD - Gold Technical Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: #333;
        padding: 20px;
        min-height: 100vh;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .header {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        margin-bottom: 30px;
        text-align: center;
    }

    .header h1 {
        color: #1e3c72;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .loading-content {
        background: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .spinner {
        border: 5px solid #f3f3f3;
        border-top: 5px solid #FFD700;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card h2 {
        color: #1e3c72;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #FFD700;
        font-size: 1.5em;
    }

    .signal-box {
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
        font-size: 1.3em;
    }

    .buy-signal {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border: 3px solid #2e7d32;
    }

    .sell-signal {
        background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        color: white;
        border: 3px solid #c62828;
    }

    .neutral-signal {
        background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        color: white;
        border: 3px solid #E65100;
    }

    .level-item {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        margin: 8px 0;
        background: #f5f5f5;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .level-label {
        font-weight: bold;
        color: #1e3c72;
    }

    .level-value {
        color: #2a5298;
        font-weight: 600;
    }

    .entry-suggestion {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin: 15px 0;
        border: 3px solid #5a67d8;
    }

    .entry-suggestion h3 {
        margin-bottom: 15px;
        font-size: 1.3em;
    }

    .entry-details {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
    }

    .analysis-text {
        line-height: 1.8;
        color: #555;
        margin: 10px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .warning-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        color: #856404;
    }

    .update-time {
        text-align: center;
        color: #666;
        margin-top: 20px;
        font-style: italic;
    }

    .refresh-btn {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 10px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        margin: 20px auto;
        display: block;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
    }

    .refresh-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }

    .ath-badge {
        background: linear-gradient(135deg, #FF6B6B 0%, #FFE66D 100%);
        color: #333;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        display: inline-block;
        margin: 10px 0;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.8em;
        }
        .grid {
            grid-template-columns: 1fr;
        }
    }
</style>
```

</head>
<body>
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 style="color: #1e3c72; margin-bottom: 10px;">ğŸ”„ Äang phÃ¢n tÃ­ch thá»‹ trÆ°á»ng...</h2>
            <p style="color: #666;">Vui lÃ²ng Ä‘á»£i, AI Ä‘ang phÃ¢n tÃ­ch chart vÃ  tÃ­nh toÃ¡n entry points</p>
        </div>
    </div>

```
<div class="container">
    <div class="header">
        <h1>ğŸ“Š PHÃ‚N TÃCH Ká»¸ THUáº¬T XAU/USD (GOLD)</h1>
        <div style="margin-top: 20px; color: #1e3c72; font-size: 1.1em;">
            âš¡ PhÃ¢n tÃ­ch tá»± Ä‘á»™ng vá»›i AI - Cáº­p nháº­t má»—i láº§n load trang
        </div>
        <button class="refresh-btn" onclick="location.reload()">ğŸ”„ PhÃ¢n tÃ­ch láº¡i</button>
    </div>

    <!-- TradingView Widget -->
    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: 20px;">
        <div style="height: 500px;">
            <div class="tradingview-widget-container" style="height:100%;width:100%">
                <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                    "autosize": true,
                    "symbol": "OANDA:XAUUSD",
                    "interval": "240",
                    "timezone": "Asia/Ho_Chi_Minh",
                    "theme": "light",
                    "style": "1",
                    "locale": "vi_VN",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "calendar": false,
                    "support_host": "https://www.tradingview.com"
                }
                </script>
            </div>
        </div>
    </div>

    <!-- TradingView Symbol Overview -->
    <div class="card" style="padding: 10px; margin-bottom: 20px;">
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
            {
                "symbols": [["OANDA:XAUUSD|240"]],
                "chartOnly": false,
                "width": "100%",
                "height": 400,
                "locale": "vi_VN",
                "colorTheme": "light",
                "autosize": true,
                "showVolume": false,
                "showMA": true,
                "hideDateRanges": false,
                "hideMarketStatus": false,
                "hideSymbolLogo": false,
                "scalePosition": "right",
                "scaleMode": "Normal",
                "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                "fontSize": "10",
                "noTimeScale": false,
                "valuesTracking": "1",
                "changeMode": "price-and-percent",
                "chartType": "area"
            }
            </script>
        </div>
    </div>

    <div id="analysisContent"></div>

    <div class="warning-box" style="background: #e3f2fd; border-color: #2196F3; color: #0d47a1;">
        <strong>ğŸ“Œ LÆ¯U Ã QUAN TRá»ŒNG:</strong><br>
        â€¢ PhÃ¢n tÃ­ch Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi AI dá»±a trÃªn dá»¯ liá»‡u thá»i gian thá»±c<br>
        â€¢ LuÃ´n sá»­ dá»¥ng Stop Loss cho má»i lá»‡nh<br>
        â€¢ KhÃ´ng nÃªn risk quÃ¡ 1-2% tÃ i khoáº£n má»—i lá»‡nh<br>
        â€¢ PhÃ¢n tÃ­ch nÃ y chá»‰ mang tÃ­nh cháº¥t tham kháº£o<br>
        â€¢ Thá»‹ trÆ°á»ng cÃ³ thá»ƒ thay Ä‘á»•i báº¥t ngá» do tin tá»©c<br>
        â€¢ NÃªn káº¿t há»£p vá»›i phÃ¢n tÃ­ch riÃªng cá»§a báº¡n
    </div>

    <div class="update-time" id="updateTime">
        ğŸ“Š Äang táº£i dá»¯ liá»‡u phÃ¢n tÃ­ch...
    </div>
</div>

<script>
    async function analyzeMarket() {
        try {
            const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    model: "claude-sonnet-4-20250514",
                    max_tokens: 4000,
                    messages: [{
                        role: "user",
                        content: `Báº¡n lÃ  chuyÃªn gia phÃ¢n tÃ­ch ká»¹ thuáº­t XAU/USD (vÃ ng). HÃ£y phÃ¢n tÃ­ch thá»‹ trÆ°á»ng vÃ ng HIá»†N Táº I vÃ  Ä‘Æ°a ra:
```

1. TÃ¬m giÃ¡ XAU/USD má»›i nháº¥t (search web Ä‘á»ƒ cÃ³ giÃ¡ chÃ­nh xÃ¡c nháº¥t)
1. XÃ¡c Ä‘á»‹nh ATH (All Time High) gáº§n Ä‘Ã¢y
1. PhÃ¢n tÃ­ch Ä‘a khung thá»i gian (15m, 30m, 1h, 4h, D1, W1)
1. TÃ­nh toÃ¡n cÃ¡c má»©c Support & Resistance chÃ­nh xÃ¡c
1. ÄÆ°a ra 3 ENTRY SETUP cá»¥ thá»ƒ:
- Entry #1: BUY LIMIT (conservative)
- Entry #2: SELL STOP hoáº·c SELL LIMIT (náº¿u phÃ¹ há»£p)
- Entry #3: BUY/SELL MARKET (aggressive)
1. Má»—i setup cáº§n cÃ³: Entry price, Stop Loss, Take Profit (3 levels), Risk/Reward ratio
1. PhÃ¢n tÃ­ch cÃ¡c chá»‰ bÃ¡o ká»¹ thuáº­t chÃ­nh (RSI, MACD, EMA, Fibonacci)
1. ÄÆ°a ra chiáº¿n lÆ°á»£c cho Scalper, Swing Trader, Long-term Investor

Tráº£ vá» káº¿t quáº£ dÆ°á»›i dáº¡ng JSON vá»›i format:
{
â€œcurrentPriceâ€: â€œgiÃ¡ hiá»‡n táº¡iâ€,
â€œpriceChangeâ€: â€œ% thay Ä‘á»•iâ€,
â€œathâ€: â€œall time highâ€,
â€œisNearATHâ€: true/false,
â€œoverallSignalâ€: â€œSTRONG BUY/BUY/NEUTRAL/SELL/STRONG SELLâ€,
â€œtimeframeSignalsâ€: {
â€œM15â€: â€œsignalâ€,
â€œM30â€: â€œsignalâ€,
â€œH1â€: â€œsignalâ€,
â€œH4â€: â€œsignalâ€,
â€œD1â€: â€œsignalâ€,
â€œW1â€: â€œsignalâ€
},
â€œentrySetupsâ€: [
{
â€œnameâ€: â€œSetup #1â€,
â€œtypeâ€: â€œBUY LIMITâ€,
â€œentryâ€: â€œgiÃ¡ entryâ€,
â€œstopLossâ€: â€œgiÃ¡ SLâ€,
â€œtakeProfitâ€: [â€œTP1â€, â€œTP2â€, â€œTP3â€],
â€œriskRewardâ€: â€œ1:Xâ€,
â€œdescriptionâ€: â€œmÃ´ táº£â€
}
],
â€œsupportLevelsâ€: [â€œS1â€, â€œS2â€, â€œS3â€],
â€œresistanceLevelsâ€: [â€œR1â€, â€œR2â€, â€œR3â€],
â€œindicatorsâ€: {
â€œrsiâ€: â€œvalueâ€,
â€œmacdâ€: â€œsignalâ€,
â€œema50â€: â€œvalueâ€,
â€œema200â€: â€œvalueâ€
},
â€œanalysisâ€: {
â€œbullishPointsâ€: [â€œÄ‘iá»ƒm 1â€, â€œÄ‘iá»ƒm 2â€],
â€œbearishPointsâ€: [â€œÄ‘iá»ƒm 1â€, â€œÄ‘iá»ƒm 2â€],
â€œrecommendationâ€: â€œkhuyáº¿n nghá»‹ tá»•ng quanâ€
},
â€œstrategiesâ€: {
â€œscalperâ€: â€œchiáº¿n lÆ°á»£c ngáº¯n háº¡nâ€,
â€œswingTraderâ€: â€œchiáº¿n lÆ°á»£c trung háº¡nâ€,
â€œlongTermâ€: â€œchiáº¿n lÆ°á»£c dÃ i háº¡nâ€
},
â€œfibonacciâ€: {
â€œ0â€: â€œgiÃ¡â€,
â€œ236â€: â€œgiÃ¡â€,
â€œ382â€: â€œgiÃ¡â€,
â€œ500â€: â€œgiÃ¡â€,
â€œ618â€: â€œgiÃ¡â€,
â€œ786â€: â€œgiÃ¡â€,
â€œ100â€: â€œgiÃ¡â€
}
}

Chá»‰ tráº£ vá» JSON, khÃ´ng thÃªm text khÃ¡c.`
}],
tools: [{
type: â€œweb_search_20250305â€,
name: â€œweb_searchâ€
}]
})
});

```
            const data = await response.json();
            
            let jsonText = '';
            for (const item of data.content) {
                if (item.type === 'text') {
                    jsonText += item.text;
                }
            }

            jsonText = jsonText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
            
            const analysis = JSON.parse(jsonText);
            renderAnalysis(analysis);
            
            document.getElementById('loadingOverlay').style.display = 'none';
            
        } catch (error) {
            console.error('Error:', error);
            document.getElementById('loadingOverlay').innerHTML = `
                <div class="loading-content">
                    <h2 style="color: #f44336;">âŒ Lá»—i phÃ¢n tÃ­ch</h2>
                    <p style="color: #666; margin: 20px 0;">KhÃ´ng thá»ƒ káº¿t ná»‘i API hoáº·c phÃ¢n tÃ­ch tháº¥t báº¡i.</p>
                    <p style="color: #666;">Vui lÃ²ng thá»­ láº¡i sau hoáº·c kiá»ƒm tra káº¿t ná»‘i máº¡ng.</p>
                    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ Thá»­ láº¡i</button>
                </div>
            `;
        }
    }

    function renderAnalysis(data) {
        const content = document.getElementById('analysisContent');
        
        let athBadge = '';
        if (data.isNearATH) {
            athBadge = `<div class="ath-badge">ğŸ”¥ Gáº§n ATH: ${data.ath}</div>`;
        }

        const signalClass = data.overallSignal.includes('BUY') ? 'buy-signal' : 
                           data.overallSignal.includes('SELL') ? 'sell-signal' : 'neutral-signal';

        content.innerHTML = `
            <div class="grid">
                <div class="card">
                    <h2>ğŸ¯ TÃN HIá»†U Tá»”NG QUAN</h2>
                    ${athBadge}
                    <div class="signal-box ${signalClass}">
                        ${data.overallSignal}
                    </div>
                    <div class="analysis-text">
                        <strong>GiÃ¡ hiá»‡n táº¡i:</strong> ${data.currentPrice}<br>
                        <strong>Thay Ä‘á»•i:</strong> ${data.priceChange}<br><br>
                        <strong>PhÃ¢n tÃ­ch Ä‘a khung thá»i gian:</strong><br>
                        â€¢ <strong>15 phÃºt:</strong> ${data.timeframeSignals.M15}<br>
                        â€¢ <strong>30 phÃºt:</strong> ${data.timeframeSignals.M30}<br>
                        â€¢ <strong>1 giá»:</strong> ${data.timeframeSignals.H1}<br>
                        â€¢ <strong>4 giá»:</strong> ${data.timeframeSignals.H4}<br>
                        â€¢ <strong>NgÃ y:</strong> ${data.timeframeSignals.D1} â­<br>
                        â€¢ <strong>Tuáº§n:</strong> ${data.timeframeSignals.W1} â­
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“ˆ Gá»¢I Ã ENTRY</h2>
                    ${data.entrySetups.map((setup, index) => `
                        <div class="entry-suggestion" style="${index === 1 ? 'background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);' : index === 2 ? 'background: linear-gradient(135deg, #4CAF50 0%, #2e7d32 100%);' : ''}">
                            <h3>${setup.name}</h3>
                            <div class="entry-details">
                                <strong>Loáº¡i:</strong> ${setup.type}<br>
                                <strong>Entry:</strong> ${setup.entry}<br>
                                <strong>Stop Loss:</strong> ${setup.stopLoss}<br>
                                <strong>Take Profit 1:</strong> ${setup.takeProfit[0]}<br>
                                <strong>Take Profit 2:</strong> ${setup.takeProfit[1]}<br>
                                <strong>Take Profit 3:</strong> ${setup.takeProfit[2]}<br>
                                <strong>Risk/Reward:</strong> ${setup.riskReward}<br>
                                <p style="margin-top: 10px; opacity: 0.9;">${setup.description}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="card">
                    <h2>ğŸšï¸ Má»¨C Há»– TRá»¢ & KHÃNG Cá»°</h2>
                    <h3 style="color: #f44336; margin-top: 15px;">KhÃ¡ng Cá»±</h3>
                    ${data.resistanceLevels.map((level, i) => `
                        <div class="level-item" style="border-left-color: ${i === 0 ? '#f44336' : i === 1 ? '#ff5722' : '#ff9800'};">
                            <span class="level-label">R${i+1}:</span>
                            <span class="level-value">${level}</span>
                        </div>
                    `).join('')}

                    <div style="text-align: center; padding: 15px; background: #FFD700; border-radius: 8px; margin: 15px 0; font-weight: bold; color: #1e3c72;">
                        GIÃ HIá»†N Táº I: ${data.currentPrice}
                    </div>

                    <h3 style="color: #4CAF50; margin-top: 15px;">Há»— Trá»£</h3>
                    ${data.supportLevels.map((level, i) => `
                        <div class="level-item" style="border-left-color: ${i === 0 ? '#8bc34a' : i === 1 ? '#4CAF50' : '#2e7d32'};">
                            <span class="level-label">S${i+1}:</span>
                            <span class="level-value">${level}</span>
                        </div>
                    `).join('')}
                </div>

                <div class="card">
                    <h2>ğŸ“Š CHá»ˆ BÃO Ká»¸ THUáº¬T</h2>
                    <div class="tradingview-widget-container" style="margin-bottom: 20px;">
                        <div class="tradingview-widget-container__widget"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                        {
                            "interval": "4h",
                            "width": "100%",
                            "isTransparent": false,
                            "height": 450,
                            "symbol": "OANDA:XAUUSD",
                            "showIntervalTabs": true,
                            "locale": "vi_VN",
                            "colorTheme": "light"
                        }
                        </script>
                    </div>
                    <div class="analysis-text">
                        <strong>CÃ¡c chá»‰ bÃ¡o chÃ­nh:</strong><br>
                        â€¢ <strong>RSI:</strong> ${data.indicators.rsi}<br>
                        â€¢ <strong>MACD:</strong> ${data.indicators.macd}<br>
                        â€¢ <strong>EMA 50:</strong> ${data.indicators.ema50}<br>
                        â€¢ <strong>EMA 200:</strong> ${data.indicators.ema200}
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ” PHÃ‚N TÃCH SÃ‚U</h2>
                    <div class="analysis-text">
                        <strong>ğŸ“Œ Äiá»ƒm máº¡nh cá»§a xu hÆ°á»›ng tÄƒng:</strong><br>
                        ${data.analysis.bullishPoints.map(p => `â€¢ ${p}<br>`).join('')}
                    </div>
                    <div class="analysis-text">
                        <strong>âš ï¸ Rá»§i ro cáº§n lÆ°u Ã½:</strong><br>
                        ${data.analysis.bearishPoints.map(p => `â€¢ ${p}<br>`).join('')}
                    </div>
                    <div class="analysis-text">
                        <strong>ğŸ¯ Khuyáº¿n nghá»‹:</strong><br>
                        ${data.analysis.recommendation}
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ’¡ CHIáº¾N LÆ¯á»¢C KHUYáº¾N NGHá»Š</h2>
                    <div class="analysis-text">
                        <strong>âœ… Trader ngáº¯n háº¡n (Scalper/Day trader):</strong><br>
                        ${data.strategies.scalper}
                    </div>
                    <div class="analysis-text">
                        <strong>âœ… Trader trung háº¡n (Swing trader):</strong><br>
                        ${data.strategies.swingTrader}
                    </div>
                    <div class="analysis-text">
                        <strong>âœ… NhÃ  Ä‘áº§u tÆ° dÃ i háº¡n:</strong><br>
                        ${data.strategies.longTerm}
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“ FIBONACCI RETRACEMENT</h2>
                    ${Object.entries(data.fibonacci).map(([level, price]) => `
                        <div class="level-item">
                            <span class="level-label">${level === '236' ? '23.6%' : level === '382' ? '38.2%' : level === '500' ? '50%' : level === '618' ? '61.8%' : level === '786' ? '78.6%' : level === '0' ? '0%' : '100%'}:</span>
                            <span class="level-value">${price}${level === '618' ? ' â­' : ''}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;

        const now = new Date();
        document.getElementById('updateTime').innerHTML = `
            ğŸ“Š PhÃ¢n tÃ­ch Ä‘Æ°á»£c táº¡o lÃºc: ${now.toLocaleString('vi-VN')}<br>
            ğŸ”„ Nháº¥n "PhÃ¢n tÃ­ch láº¡i" Ä‘á»ƒ cáº­p nháº­t vá»›i dá»¯ liá»‡u má»›i nháº¥t
        `;
    }

    window.onload = analyzeMarket;
</script>
```

</body>
</html>
