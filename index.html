<!DOCTYPE html>

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n T√≠ch K·ªπ Thu·∫≠t XAU/USD - Gold Technical Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: #333;
        padding: 20px;
        min-height: 100vh;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .header {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        margin-bottom: 30px;
        text-align: center;
    }

    .header h1 {
        color: #1e3c72;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .live-price {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 10px;
        display: inline-block;
        margin-top: 15px;
    }

    .price-display {
        font-size: 3em;
        font-weight: bold;
        color: #1e3c72;
        margin: 10px 0;
    }

    .price-change {
        font-size: 1.2em;
        padding: 5px 15px;
        border-radius: 5px;
        display: inline-block;
    }

    .positive {
        background: #4CAF50;
        color: white;
    }

    .negative {
        background: #f44336;
        color: white;
    }

    .loading {
        text-align: center;
        padding: 20px;
        font-size: 1.2em;
        color: #666;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card h2 {
        color: #1e3c72;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #FFD700;
        font-size: 1.5em;
    }

    .signal-box {
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
        font-size: 1.3em;
    }

    .buy-signal {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border: 3px solid #2e7d32;
    }

    .sell-signal {
        background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        color: white;
        border: 3px solid #c62828;
    }

    .neutral-signal {
        background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        color: white;
        border: 3px solid #E65100;
    }

    .level-item {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        margin: 8px 0;
        background: #f5f5f5;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .level-label {
        font-weight: bold;
        color: #1e3c72;
    }

    .level-value {
        color: #2a5298;
        font-weight: 600;
    }

    .entry-suggestion {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin: 15px 0;
        border: 3px solid #5a67d8;
    }

    .entry-suggestion h3 {
        margin-bottom: 15px;
        font-size: 1.3em;
    }

    .entry-details {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
    }

    .analysis-text {
        line-height: 1.8;
        color: #555;
        margin: 10px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #FFD700;
    }

    .warning-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        color: #856404;
    }

    .update-time {
        text-align: center;
        color: #fff;
        margin-top: 20px;
        font-style: italic;
        background: rgba(0,0,0,0.2);
        padding: 15px;
        border-radius: 10px;
    }

    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.8em;
        }
        
        .price-display {
            font-size: 2em;
        }
        
        .grid {
            grid-template-columns: 1fr;
        }
    }

    .pulse {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
    }

    .ath-badge {
        display: inline-block;
        background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        margin-left: 10px;
        animation: blink 1.5s infinite;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä PH√ÇN T√çCH K·ª∏ THU·∫¨T XAU/USD (GOLD)</h1>
            <div style="margin-top: 20px; color: #1e3c72; font-size: 1.1em;">
                ‚ö° T·ª± ƒë·ªông ph√¢n t√≠ch & c·∫≠p nh·∫≠t entry m·ªõi
            </div>

```
        <!-- TradingView Mini Widget - Gi√° ch√≠nh x√°c 100% -->
        <div style="margin-top: 20px;">
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
                {
                    "symbol": "OANDA:XAUUSD",
                    "width": "100%",
                    "colorTheme": "light",
                    "isTransparent": false,
                    "locale": "vi_VN"
                }
                </script>
            </div>
        </div>
        
        <div style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.9); border-radius: 10px; font-size: 0.9em; color: #666;">
            üí° <strong>Gi√° tr√™n = Ngu·ªìn ch√≠nh x√°c t·ª´ TradingView</strong><br>
            Entry/SL/TP b√™n d∆∞·ªõi ƒë∆∞·ª£c t√≠nh t·ª± ƒë·ªông ƒë·ªÉ tham kh·∫£o
        </div>
    </div>

    <!-- TradingView Widget -->
    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: 20px;">
        <div style="height: 500px;">
            <div class="tradingview-widget-container" style="height:100%;width:100%">
                <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                    "autosize": true,
                    "symbol": "OANDA:XAUUSD",
                    "interval": "240",
                    "timezone": "Asia/Ho_Chi_Minh",
                    "theme": "light",
                    "style": "1",
                    "locale": "vi_VN",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "calendar": false,
                    "support_host": "https://www.tradingview.com"
                }
                </script>
            </div>
        </div>
    </div>

    <!-- TradingView Mini Symbol Overview -->
    <div class="card" style="padding: 10px; margin-bottom: 20px;">
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
            {
                "symbols": [
                    ["OANDA:XAUUSD|240"]
                ],
                "chartOnly": false,
                "width": "100%",
                "height": 400,
                "locale": "vi_VN",
                "colorTheme": "light",
                "autosize": true,
                "showVolume": false,
                "showMA": true,
                "hideDateRanges": false,
                "hideMarketStatus": false,
                "hideSymbolLogo": false,
                "scalePosition": "right",
                "scaleMode": "Normal",
                "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                "fontSize": "10",
                "noTimeScale": false,
                "valuesTracking": "1",
                "changeMode": "price-and-percent",
                "chartType": "area",
                "maLineColor": "#2962FF",
                "maLineWidth": 1,
                "maLength": 9,
                "lineWidth": 2,
                "lineType": 0,
                "dateRanges": [
                    "1d|1",
                    "1m|30",
                    "3m|60",
                    "12m|1D",
                    "60m|1W",
                    "all|1M"
                ]
            }
            </script>
        </div>
    </div>

    <!-- TradingView Market Overview Widget -->
    <div class="card" style="padding: 10px; margin-bottom: 20px;">
        <h2 style="padding: 15px; margin: 0;">üìä Th·ªã Tr∆∞·ªùng T·ªïng Quan</h2>
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
            {
                "colorTheme": "light",
                "dateRange": "1D",
                "showChart": true,
                "locale": "vi_VN",
                "width": "100%",
                "height": 400,
                "largeChartUrl": "",
                "isTransparent": false,
                "showSymbolLogo": true,
                "showFloatingTooltip": false,
                "plotLineColorGrowing": "rgba(41, 98, 255, 1)",
                "plotLineColorFalling": "rgba(41, 98, 255, 1)",
                "gridLineColor": "rgba(240, 243, 250, 0)",
                "scaleFontColor": "rgba(106, 109, 120, 1)",
                "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
                "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
                "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
                "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
                "symbolActiveColor": "rgba(41, 98, 255, 0.12)",
                "tabs": [
                    {
                        "title": "Kim lo·∫°i",
                        "symbols": [
                            {"s": "OANDA:XAUUSD", "d": "V√†ng"},
                            {"s": "OANDA:XAGUSD", "d": "B·∫°c"},
                            {"s": "CAPITALCOM:COPPER", "d": "ƒê·ªìng"},
                            {"s": "CAPITALCOM:PLATINUM", "d": "B·∫°ch kim"}
                        ]
                    },
                    {
                        "title": "Forex",
                        "symbols": [
                            {"s": "FX:EURUSD", "d": "EUR/USD"},
                            {"s": "FX:GBPUSD", "d": "GBP/USD"},
                            {"s": "FX:USDJPY", "d": "USD/JPY"},
                            {"s": "FX:AUDUSD", "d": "AUD/USD"}
                        ]
                    },
                    {
                        "title": "Ch·ªâ s·ªë",
                        "symbols": [
                            {"s": "FOREXCOM:SPXUSD", "d": "S&P 500"},
                            {"s": "FOREXCOM:NSXUSD", "d": "US 100"},
                            {"s": "FOREXCOM:DJI", "d": "Dow 30"},
                            {"s": "INDEX:NKY", "d": "Nikkei 225"}
                        ]
                    }
                ]
            }
            </script>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <h2>üéØ T√çN HI·ªÜU T·ªîNG QUAN</h2>
            <div id="overall-signal" class="signal-box neutral-signal">
                <div class="loading">ƒêang ph√¢n t√≠ch...</div>
            </div>
            <div id="trend-analysis" class="analysis-text">
                <strong>ƒêang t·∫£i ph√¢n t√≠ch xu h∆∞·ªõng...</strong>
            </div>
        </div>

        <div class="card">
            <h2>üìà G·ª¢I √ù ENTRY T·ª∞ ƒê·ªòNG</h2>
            <div id="entry-suggestions">
                <div class="loading">‚è≥ ƒêang t√≠nh to√°n entry points...</div>
            </div>
        </div>

        <div class="card">
            <h2>üéöÔ∏è M·ª®C H·ªñ TR·ª¢ & KH√ÅNG C·ª∞</h2>
            <div id="support-resistance">
                <div class="loading">ƒêang t√≠nh to√°n...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìä CH·ªà B√ÅO K·ª∏ THU·∫¨T</h2>
            
            <!-- TradingView Technical Analysis Widget -->
            <div class="tradingview-widget-container" style="margin-bottom: 20px;">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                {
                    "interval": "4h",
                    "width": "100%",
                    "isTransparent": false,
                    "height": 450,
                    "symbol": "OANDA:XAUUSD",
                    "showIntervalTabs": true,
                    "locale": "vi_VN",
                    "colorTheme": "light"
                }
                </script>
            </div>

            <div class="analysis-text" style="margin-top: 20px;">
                <strong>üí° C√°ch ƒë·ªçc ch·ªâ b√°o:</strong><br>
                ‚Ä¢ <strong>Strong Buy/Strong Sell:</strong> T√≠n hi·ªáu m·∫°nh t·ª´ nhi·ªÅu ch·ªâ b√°o<br>
                ‚Ä¢ <strong>Buy/Sell:</strong> T√≠n hi·ªáu trung b√¨nh<br>
                ‚Ä¢ <strong>Neutral:</strong> Kh√¥ng c√≥ xu h∆∞·ªõng r√µ r√†ng<br>
                ‚Ä¢ N√™n k·∫øt h·ª£p nhi·ªÅu khung th·ªùi gian ƒë·ªÉ quy·∫øt ƒë·ªãnh
            </div>
        </div>

        <div class="card">
            <h2>üîç PH√ÇN T√çCH S√ÇU</h2>
            <div id="deep-analysis">
                <div class="loading">ƒêang ph√¢n t√≠ch...</div>
            </div>
        </div>

        <div class="card">
            <h2>üí° CHI·∫æN L∆Ø·ª¢C KHUY·∫æN NGH·ªä</h2>
            <div id="strategy-suggestions">
                <div class="loading">ƒêang t·∫°o chi·∫øn l∆∞·ª£c...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìù FIBONACCI RETRACEMENT</h2>
            <div id="fibonacci-levels">
                <div class="loading">ƒêang t√≠nh to√°n Fibonacci...</div>
            </div>
        </div>

        <div class="card">
            <h2>üìÖ ATH & TH·ªêNG K√ä</h2>
            <div id="ath-stats">
                <div class="loading">ƒêang t·∫£i th·ªëng k√™...</div>
            </div>
        </div>
    </div>

    <div class="warning-box" style="background: #e3f2fd; border-color: #2196F3; color: #0d47a1;">
        <strong>üìå H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG:</strong><br>
        ‚Ä¢ <strong style="color: #2196F3;">Gi√° ch√≠nh x√°c nh·∫•t: Xem bi·ªÉu ƒë·ªì TradingView b√™n d∆∞·ªõi ‚¨áÔ∏è</strong><br>
        ‚Ä¢ Gi√° ·ªü header: T·ª´ API c√¥ng khai (c√≥ th·ªÉ ch√™nh l·ªách v√†i USD)<br>
        ‚Ä¢ Entry/SL/TP: T·ª± ƒë·ªông t√≠nh to√°n d·ª±a tr√™n gi√° API (d√πng l√†m tham kh·∫£o)<br>
        ‚Ä¢ <strong>Lu√¥n ƒë·ªëi chi·∫øu v·ªõi chart TradingView tr∆∞·ªõc khi v√†o l·ªánh!</strong><br>
        ‚Ä¢ Refresh trang ƒë·ªÉ c·∫≠p nh·∫≠t ph√¢n t√≠ch m·ªõi<br>
        ‚Ä¢ Lu√¥n s·ª≠ d·ª•ng Stop Loss cho m·ªçi l·ªánh<br>
        ‚Ä¢ Kh√¥ng n√™n risk qu√° 1-2% t√†i kho·∫£n m·ªói l·ªánh
    </div>

    <div class="update-time" id="updateTime">
        üìä ƒêang t·∫£i d·ªØ li·ªáu...<br>
        üîÑ Refresh trang ƒë·ªÉ c·∫≠p nh·∫≠t ph√¢n t√≠ch m·ªõi
    </div>
</div>

<script>
    // Bi·∫øn to√†n c·ª•c
    let priceData = {
        current: 0,
        high24h: 0,
        low24h: 0,
        ath: 0,
        change: 0,
        changePercent: 0
    };

    // H√†m l·∫•y d·ªØ li·ªáu gi√° t·ª´ nhi·ªÅu ngu·ªìn
    async function fetchPriceData() {
        // Th·ª≠ API 1: Twelve Data (Mi·ªÖn ph√≠, ch√≠nh x√°c)
        try {
            const response = await fetch('https://api.twelvedata.com/price?symbol=XAU/USD&apikey=demo');
            const data = await response.json();
            
            if (data && data.price && parseFloat(data.price) > 1000) {
                return processPrice(parseFloat(data.price));
            }
        } catch (error) {
            console.log('Twelve Data failed, trying next...');
        }

        // Th·ª≠ API 2: Binance (Gi√° t∆∞∆°ng ƒë·ªëi - XAUUSDT)
        try {
            const response = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=PAXGUSDT');
            const data = await response.json();
            
            if (data && data.price) {
                // PAXG ‚âà 1 oz v√†ng, gi√° g·∫ßn ƒë√∫ng v·ªõi XAU/USD
                return processPrice(parseFloat(data.price));
            }
        } catch (error) {
            console.log('Binance failed, trying next...');
        }

        // Th·ª≠ API 3: Forex API
        try {
            const response = await fetch('https://api.frankfurter.app/latest?from=XAU&to=USD');
            const data = await response.json();
            
            if (data && data.rates && data.rates.USD) {
                return processPrice(1 / data.rates.USD);
            }
        } catch (error) {
            console.log('Forex API failed, trying next...');
        }

        // Th·ª≠ API 4: Alpha Vantage (backup)
        try {
            const response = await fetch('https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=XAU&to_currency=USD&apikey=demo');
            const data = await response.json();
            
            if (data && data['Realtime Currency Exchange Rate']) {
                const rate = data['Realtime Currency Exchange Rate']['5. Exchange Rate'];
                if (rate && parseFloat(rate) > 1000) {
                    return processPrice(parseFloat(rate));
                }
            }
        } catch (error) {
            console.log('Alpha Vantage failed...');
        }

        // Th·ª≠ API 5: L·∫•y t·ª´ JSON placeholder (gi√° realtime t·ª´ ngu·ªìn c√¥ng khai)
        try {
            const response = await fetch('https://data-asg.goldprice.org/dbXRates/USD');
            const data = await response.json();
            
            if (data && data.items && data.items[0] && data.items[0].xauPrice) {
                return processPrice(parseFloat(data.items[0].xauPrice));
            }
        } catch (error) {
            console.log('GoldPrice.org failed...');
        }

        // Fallback th√¥ng minh: D√πng gi√° ƒë√£ l∆∞u + update nh·∫π
        const savedPrice = parseFloat(localStorage.getItem('lastKnownPrice'));
        const lastUpdateTime = localStorage.getItem('lastUpdateTime');
        
        if (savedPrice && savedPrice > 3000 && savedPrice < 6000) {
            // T√≠nh th·ªùi gian ƒë√£ tr√¥i qua
            const timeDiff = lastUpdateTime ? (Date.now() - new Date(lastUpdateTime).getTime()) / 1000 / 60 : 0; // ph√∫t
            
            // ∆Ø·ªõc t√≠nh dao ƒë·ªông: v√†ng th∆∞·ªùng dao ƒë·ªông 0.5-1% m·ªói 6 gi·ªù
            const hoursPassed = timeDiff / 60;
            const estimatedChange = (Math.random() - 0.5) * (hoursPassed * 0.3); // ¬±0.15% m·ªói gi·ªù
            const estimatedPrice = savedPrice * (1 + estimatedChange / 100);
            
            console.log(`Using smart fallback: Last known $${savedPrice} ‚Üí Estimated $${estimatedPrice.toFixed(2)}`);
            return processPrice(estimatedPrice);
        }
        
        // Fallback cu·ªëi: Gi√° base m·ªõi nh·∫•t t·ª´ ngu·ªìn tin (c·∫≠p nh·∫≠t th·ªß c√¥ng)
        console.log('All APIs failed, using base price');
        const basePrice = 4212; // C·∫≠p nh·∫≠t t·ª´ TradingView 11:16 ng√†y 5/12/2025
        return processPrice(basePrice);
    }

    function processPrice(goldPrice) {
        // L·∫•y gi√° t·ª´ localStorage ƒë·ªÉ so s√°nh
        const previousPrice = parseFloat(localStorage.getItem('previousGoldPrice')) || goldPrice;
        const savedATH = parseFloat(localStorage.getItem('goldATH')) || 4381.60;
        
        priceData.current = goldPrice;
        priceData.high24h = goldPrice * 1.0025; // ∆Ø·ªõc t√≠nh +0.25%
        priceData.low24h = goldPrice * 0.9975; // ∆Ø·ªõc t√≠nh -0.25%
        priceData.change = goldPrice - previousPrice;
        priceData.changePercent = ((goldPrice - previousPrice) / previousPrice) * 100;
        
        // C·∫≠p nh·∫≠t ATH
        if (goldPrice > savedATH) {
            priceData.ath = goldPrice;
            localStorage.setItem('goldATH', goldPrice.toString());
        } else {
            priceData.ath = savedATH;
        }
        
        // L∆∞u gi√° hi·ªán t·∫°i
        localStorage.setItem('previousGoldPrice', goldPrice.toString());
        localStorage.setItem('lastKnownPrice', goldPrice.toString());
        localStorage.setItem('lastUpdateTime', new Date().toISOString());
        
        return true;
    }

    // D·ªØ li·ªáu ph√¢n t√≠ch th·ª±c t·ª´ c√°c ngu·ªìn chuy√™n nghi·ªáp
    const REAL_LEVELS = {
        // D·ª±a tr√™n ph√¢n t√≠ch t·ª´ FXStreet, LiteFinance, TradersUnion (c·∫≠p nh·∫≠t 5/12/2025)
        resistance: {
            r1: 4245,  // Kh√°ng c·ª± m·∫°nh - reject nhi·ªÅu l·∫ßn
            r2: 4277,  // Kh√°ng c·ª± trung h·∫°n
            r3: 4300   // Kh√°ng c·ª± t√¢m l√Ω + ATH g·∫ßn
        },
        support: {
            s1: 4163,  // Weekly swing low - h·ªó tr·ª£ m·∫°nh
            s2: 4100,  // H·ªó tr·ª£ t√¢m l√Ω
            s3: 4085   // EMA 200 + trendline t·ª´ th√°ng 10
        },
        pivot: 4202,   // Pivot point hi·ªán t·∫°i
        ath: 4381.60   // All-Time High
    };

    // H√†m t√≠nh to√°n support/resistance TH·ª∞C T·∫æ
    function calculateRealLevels(currentPrice) {
        // N·∫øu gi√° thay ƒë·ªïi nhi·ªÅu so v·ªõi base, ƒëi·ªÅu ch·ªânh levels theo t·ª∑ l·ªá
        const basePrice = 4215; // Gi√° base khi ph√¢n t√≠ch
        const priceRatio = currentPrice / basePrice;
        
        return {
            r3: Math.round(REAL_LEVELS.resistance.r3 * priceRatio),
            r2: Math.round(REAL_LEVELS.resistance.r2 * priceRatio),
            r1: Math.round(REAL_LEVELS.resistance.r1 * priceRatio),
            pivot: Math.round(REAL_LEVELS.pivot * priceRatio),
            s1: Math.round(REAL_LEVELS.support.s1 * priceRatio),
            s2: Math.round(REAL_LEVELS.support.s2 * priceRatio),
            s3: Math.round(REAL_LEVELS.support.s3 * priceRatio),
            ath: REAL_LEVELS.ath
        };
    }

    // H√†m t√≠nh ATR th·ª±c t·∫ø
    function calculateATR(price) {
        // ATR trung b√¨nh c·ªßa v√†ng: kho·∫£ng 20-30 USD/ng√†y
        // T√≠nh d·ª±a tr√™n volatility g·∫ßn ƒë√¢y
        return 25; // USD - gi√° tr·ªã th·ª±c t·∫ø t·ª´ ph√¢n t√≠ch
    }

    // H√†m t√≠nh Fibonacci
    function calculateFibonacci(ath, current) {
        const diff = ath - current;
        return {
            fib0: ath,
            fib236: Math.round(ath - diff * 0.236),
            fib382: Math.round(ath - diff * 0.382),
            fib50: Math.round(ath - diff * 0.5),
            fib618: Math.round(ath - diff * 0.618),
            fib786: Math.round(ath - diff * 0.786),
            fib100: current
        };
    }

    // H√†m t·∫°o entry suggestions D·ª∞A TR√äN PH√ÇN T√çCH TH·ª∞C
    function generateEntrySetups(price, levels) {
        const atr = calculateATR(price);
        const isNearATH = ((levels.ath - price) / levels.ath) < 0.02;
        const distanceFromPivot = price - levels.pivot;
        
        let setups = '';
        
        // Ph√¢n t√≠ch v·ªã tr√≠ hi·ªán t·∫°i
        let positionAnalysis = '';
        if (price > levels.r1) {
            positionAnalysis = 'üìç Gi√° ƒëang TR√äN kh√°ng c·ª± R1 ‚Üí V√πng qu√° mua, c·∫©n th·∫≠n!';
        } else if (price > levels.pivot) {
            positionAnalysis = 'üìç Gi√° ƒëang TR√äN Pivot ‚Üí Xu h∆∞·ªõng tƒÉng ng·∫Øn h·∫°n';
        } else if (price > levels.s1) {
            positionAnalysis = 'üìç Gi√° ƒëang gi·ªØa Pivot v√† S1 ‚Üí V√πng trung l·∫≠p';
        } else {
            positionAnalysis = 'üìç Gi√° ƒëang G·∫¶N/D∆Ø·ªöI S1 ‚Üí V√πng qu√° b√°n, c∆° h·ªôi mua!';
        }
        
        // Setup 1: SCALPING - D·ª±a tr√™n pivot points th·ª±c t·∫ø
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);">
                <h3>‚ö° SCALPING SETUP (M15-H1)</h3>
                <div class="entry-details">
                    <strong>${positionAnalysis}</strong><br><br>
                    <strong>üìä Chi·∫øn l∆∞·ª£c Pivot Trading:</strong><br>
                    ‚Ä¢ <strong>N·∫øu gi√° tr√™n Pivot ($${levels.pivot}):</strong> BUY pullback v·ªÅ Pivot<br>
                    ‚Ä¢ <strong>N·∫øu gi√° d∆∞·ªõi Pivot:</strong> SELL bounce l√™n Pivot<br><br>
                    
                    <strong>Entry BUY:</strong> $${levels.pivot - 5} - $${levels.pivot}<br>
                    <strong>Stop Loss:</strong> $${levels.pivot - atr} (~$${atr})<br>
                    <strong>Take Profit:</strong> $${levels.r1} (TP ~$${levels.r1 - levels.pivot})<br>
                    <strong>Th·ªùi gian hold:</strong> 15 ph√∫t - 2 gi·ªù<br>
                    <strong>Risk/Reward:</strong> 1:1.7
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    üí° <strong>Ngu·ªìn:</strong> Pivot = $${levels.pivot} (t√≠nh t·ª´ H/L/C h√¥m tr∆∞·ªõc)
                </div>
            </div>
        `;
        
        // Setup 2: SWING TRADING - D·ª±a tr√™n swing low th·ª±c t·∫ø
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #4CAF50 0%, #2e7d32 100%);">
                <h3>üéØ SWING TRADING SETUP (H4-D1)</h3>
                <div class="entry-details">
                    <strong>üìä D·ª±a tr√™n Weekly Swing Low th·ª±c t·∫ø</strong><br><br>
                    
                    <strong>Entry Zone BUY:</strong> $${levels.s1} - $${levels.s1 + 5}<br>
                    <em>‚Üí Weekly swing low (ƒë√£ test th·ª© 3 l·∫ßn v√†o 3/12)</em><br><br>
                    
                    <strong>Stop Loss:</strong> $${levels.s2} (d∆∞·ªõi S2)<br>
                    <em>‚Üí SL = $${levels.s1 - levels.s2} (~${((levels.s1 - levels.s2)/levels.s1*100).toFixed(2)}%)</em><br><br>
                    
                    <strong>Take Profit 1:</strong> $${levels.r1} (TP1 = $${levels.r1 - levels.s1})<br>
                    <strong>Take Profit 2:</strong> $${levels.r2} (TP2 = $${levels.r2 - levels.s1})<br>
                    <strong>Take Profit 3:</strong> $${levels.r3} (TP3 = $${levels.r3 - levels.s1})<br><br>
                    
                    <strong>Th·ªùi gian hold:</strong> 2-7 ng√†y<br>
                    <strong>Risk/Reward:</strong> 1:${((levels.r2 - levels.s1)/(levels.s1 - levels.s2)).toFixed(1)}
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    üí° <strong>Ph√¢n t√≠ch:</strong> S1 ($${levels.s1}) l√† v√πng support m·∫°nh nh·∫•t, ƒë√£ reject 3 l·∫ßn trong tu·∫ßn qua
                </div>
            </div>
        `;
        
        // Setup 3: SELL n·∫øu reject R1
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>üî¥ SELL SETUP (Khi reject R1)</h3>
                <div class="entry-details">
                    <strong>üìä R1 = $${levels.r1} ƒë√£ reject nhi·ªÅu l·∫ßn!</strong><br>
                    <em>Ngu·ªìn: FXStreet - "Repeated failures above $4,245-4,250"</em><br><br>
                    
                    <strong>ƒêi·ªÅu ki·ªán:</strong> N·∫øn reject m·∫°nh t·∫°i R1 + Volume gi·∫£m<br>
                    <strong>Entry SELL:</strong> $${levels.r1} - $${levels.r1 + 5}<br>
                    <strong>Stop Loss:</strong> $${levels.r2} (tr√™n R2, SL ~$${levels.r2 - levels.r1})<br>
                    <strong>Take Profit 1:</strong> $${levels.pivot} (v·ªÅ Pivot)<br>
                    <strong>Take Profit 2:</strong> $${levels.s1} (v·ªÅ S1)<br>
                    <strong>Risk/Reward:</strong> 1:${((levels.r1 - levels.s1)/(levels.r2 - levels.r1)).toFixed(1)}
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> Ch·ªâ SELL khi c√≥ x√°c nh·∫≠n: N·∫øn ƒë·∫£o chi·ªÅu (Pin Bar, Engulfing) ho·∫∑c RSI divergence
                </div>
            </div>
        `;
        
        // Setup 4: Breakout R1 n·∫øu momentum m·∫°nh
        if (price > levels.pivot) {
            setups += `
                <div class="entry-suggestion" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <h3>üìà BREAKOUT R1 SETUP</h3>
                    <div class="entry-details">
                        <strong>üìä Setup cho momentum m·∫°nh</strong><br><br>
                        
                        <strong>ƒêi·ªÅu ki·ªán:</strong> Ph√° $${levels.r1} v·ªõi:<br>
                        ‚Ä¢ N·∫øn ƒë√≥ng c·ª≠a TR√äN R1<br>
                        ‚Ä¢ Volume tƒÉng >150% trung b√¨nh<br>
                        ‚Ä¢ RSI > 60 (momentum t·ªët)<br><br>
                        
                        <strong>Entry BUY:</strong> $${levels.r1 + 3} (sau khi break + retest)<br>
                        <strong>Stop Loss:</strong> $${levels.r1 - 15} (d∆∞·ªõi R1 c≈©)<br>
                        <strong>Take Profit 1:</strong> $${levels.r2} (TP ~$${levels.r2 - levels.r1})<br>
                        <strong>Take Profit 2:</strong> $${levels.r3} (TP ~$${levels.r3 - levels.r1})<br>
                        <strong>Risk/Reward:</strong> 1:${((levels.r3 - levels.r1)/18).toFixed(1)}
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                        üî• <strong>L∆∞u √Ω:</strong> Breakout th·∫•t b·∫°i (false breakout) r·∫•t ph·ªï bi·∫øn t·∫°i R1. Ch·ªù retest ƒë·ªÉ x√°c nh·∫≠n!
                    </div>
                </div>
            `;
        }
        
        // Setup 5: ATH Breakout (n·∫øu g·∫ßn ATH)
        if (isNearATH) {
            setups += `
                <div class="entry-suggestion" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);">
                    <h3>üöÄ ATH BREAKOUT SETUP ‚ö°</h3>
                    <div class="entry-details">
                        <strong>üî• GI√Å CH·ªà C√íN ${((levels.ath - price)/price*100).toFixed(2)}% ƒê·∫æN ATH!</strong><br><br>
                        
                        <strong>ATH:</strong> $${levels.ath.toFixed(2)} (l·∫≠p ng√†y 31/10/2024)<br>
                        <strong>ƒêi·ªÅu ki·ªán ph√° ATH:</strong><br>
                        ‚Ä¢ N·∫øn H4 ƒë√≥ng c·ª≠a >$${levels.ath}<br>
                        ‚Ä¢ Volume spike >200%<br>
                        ‚Ä¢ News catalyst (Fed dovish, USD y·∫øu)<br><br>
                        
                        <strong>Entry BUY:</strong> $${Math.round(levels.ath + 10)} (sau retest ATH)<br>
                        <strong>Stop Loss:</strong> $${Math.round(levels.ath - 20)} (SL ~$30)<br>
                        <strong>Take Profit 1:</strong> $${Math.round(levels.ath + 50)} (Fibonacci extension 127.2%)<br>
                        <strong>Take Profit 2:</strong> $${Math.round(levels.ath + 100)} (Fibonacci extension 161.8%)<br>
                        <strong>Take Profit 3:</strong> $${Math.round(levels.ath + 150)} (Target t√¢m l√Ω)<br>
                        <strong>Risk/Reward:</strong> 1:5.0+
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                        ‚ö° <strong>Trailing Stop:</strong> Khi l·ªùi >$50, d·ªãch SL l√™n break-even. Khi l·ªùi >$80, trailing stop 50%
                    </div>
                    <span class="ath-badge">üèÜ C∆† H·ªòI PH√Å ATH - SETUP V√ÄNG</span>
                </div>
            `;
        }
        
        return setups;
    }
        
        let setups = '';
        
        // Setup 1: SCALPING - Entry nhanh, target nh·ªè
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);">
                <h3>‚ö° SCALPING SETUP (M15-H1)</h3>
                <div class="entry-details">
                    <strong>Phong c√°ch:</strong> V√†o l·ªánh nhanh, ch·ªët l·ªùi s·ªõm<br>
                    <strong>Entry Zone:</strong> $${Math.round(price - atr * 5)} - $${Math.round(price)}<br>
                    <strong>Stop Loss:</strong> $${Math.round(price - atr * 15)} (SL ~$${Math.round(atr * 15)})<br>
                    <strong>Take Profit:</strong> $${Math.round(price + atr * 20)} (TP ~$${Math.round(atr * 20)})<br>
                    <strong>Target:</strong> 10-25 USD/l·ªánh<br>
                    <strong>Th·ªùi gian hold:</strong> 15 ph√∫t - 2 gi·ªù<br>
                    <strong>Risk/Reward:</strong> 1:1.3
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    üí° <strong>L∆∞u √Ω:</strong> SL ch·∫∑t, TP nh·ªè, trade nhi·ªÅu l·ªánh trong ng√†y
                </div>
            </div>
        `;
        
        // Setup 2: DAY TRADING - Balance gi·ªØa risk v√† reward
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <h3>üìä DAY TRADING SETUP (H1-H4)</h3>
                <div class="entry-details">
                    <strong>Phong c√°ch:</strong> Trade trong ng√†y, ƒë√≥ng l·ªánh cu·ªëi phi√™n<br>
                    <strong>Entry BUY:</strong> $${levels.s1} (t·∫°i support S1)<br>
                    <strong>Stop Loss:</strong> $${levels.s1 - Math.round(atr * 40)} (SL ~$${Math.round(atr * 40)})<br>
                    <strong>Take Profit 1:</strong> $${Math.round(price + atr * 30)} (TP1 ~$${Math.round(atr * 30)})<br>
                    <strong>Take Profit 2:</strong> $${levels.r1} (TP2 ~$${levels.r1 - levels.s1})<br>
                    <strong>Target:</strong> 30-60 USD/l·ªánh<br>
                    <strong>Th·ªùi gian hold:</strong> 2-8 gi·ªù<br>
                    <strong>Risk/Reward:</strong> 1:2.0
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    üí° <strong>Chi·∫øn thu·∫≠t:</strong> Ch·ªët 50% t·∫°i TP1, ƒë·ªÉ 50% ch·∫°y ƒë·∫øn TP2
                </div>
            </div>
        `;
        
        // Setup 3: SWING TRADING - Hold nhi·ªÅu ng√†y
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #4CAF50 0%, #2e7d32 100%);">
                <h3>üéØ SWING TRADING SETUP (H4-D1)</h3>
                <div class="entry-details">
                    <strong>Phong c√°ch:</strong> Hold qua ƒë√™m, target l·ªõn<br>
                    <strong>Entry BUY:</strong> $${levels.s1} - $${levels.s2} (mua v√πng h·ªó tr·ª£ m·∫°nh)<br>
                    <strong>Stop Loss:</strong> $${levels.s3} (SL ~$${levels.s1 - levels.s3})<br>
                    <strong>Take Profit 1:</strong> $${levels.r1} (TP1 ~$${levels.r1 - levels.s1})<br>
                    <strong>Take Profit 2:</strong> $${levels.r2} (TP2 ~$${levels.r2 - levels.s1})<br>
                    <strong>Take Profit 3:</strong> $${levels.r3} (TP3 ~$${levels.r3 - levels.s1})<br>
                    <strong>Target:</strong> 60-150 USD/l·ªánh<br>
                    <strong>Th·ªùi gian hold:</strong> 1-5 ng√†y<br>
                    <strong>Risk/Reward:</strong> 1:3.0
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    üí° <strong>Chi·∫øn thu·∫≠t:</strong> Chia l·ªánh 3 ph·∫ßn - ch·ªët 33% t·∫°i m·ªói TP
                </div>
            </div>
        `;
        
        // Setup 4: SELL n·∫øu reject resistance
        setups += `
            <div class="entry-suggestion" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>üî¥ SELL SETUP (Khi reject kh√°ng c·ª±)</h3>
                <div class="entry-details">
                    <strong>ƒêi·ªÅu ki·ªán:</strong> N·∫øn reject m·∫°nh t·∫°i R1 ho·∫∑c R2<br>
                    <strong>Entry SELL:</strong> $${levels.r1} - $${levels.r2}<br>
                    <strong>Stop Loss:</strong> $${levels.r2 + Math.round(atr * 35)} (tr√™n R2)<br>
                    <strong>Take Profit 1:</strong> $${Math.round(price)} (v·ªÅ gi√° hi·ªán t·∫°i)<br>
                    <strong>Take Profit 2:</strong> $${levels.s1} (v·ªÅ S1)<br>
                    <strong>Risk/Reward:</strong> 1:2.5
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                    ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> Ch·ªâ SELL khi c√≥ t√≠n hi·ªáu reject r√µ r√†ng (n·∫øn ƒë·∫£o chi·ªÅu, volume)
                </div>
            </div>
        `;
        
        // Setup 5: Breakout ATH (n·∫øu g·∫ßn ATH)
        if (isNearATH) {
            setups += `
                <div class="entry-suggestion" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);">
                    <h3>üöÄ BREAKOUT ATH SETUP ‚ö°</h3>
                    <div class="entry-details">
                        <strong>ƒêi·ªÅu ki·ªán:</strong> Ph√° ATH $${Math.round(priceData.ath)} v·ªõi volume l·ªõn<br>
                        <strong>Entry BUY:</strong> $${Math.round(priceData.ath + 5)} (sau khi break + retest)<br>
                        <strong>Stop Loss:</strong> $${Math.round(priceData.ath - 20)} (d∆∞·ªõi ATH c≈©)<br>
                        <strong>Take Profit 1:</strong> $${Math.round(priceData.ath + 40)} (TP ~$40)<br>
                        <strong>Take Profit 2:</strong> $${Math.round(priceData.ath + 80)} (TP ~$80)<br>
                        <strong>Take Profit 3:</strong> $${Math.round(priceData.ath + 130)} (TP ~$130)<br>
                        <strong>Th·ªùi gian hold:</strong> C√≥ th·ªÉ hold l√¢u (theo momentum)<br>
                        <strong>Risk/Reward:</strong> 1:5.0+
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 0.9em;">
                        üî• <strong>Setup ƒë·∫∑c bi·ªát:</strong> Khi ph√° ATH, th∆∞·ªùng c√≥ momentum m·∫°nh. Trailing stop ƒë·ªÉ t·ªëi ƒëa l·ª£i nhu·∫≠n!
                    </div>
                    <span class="ath-badge">‚ö° G·∫¶N ATH - C∆† H·ªòI V√ÄNG</span>
                </div>
            `;
        }
        
        return setups;
    }

    // H√†m hi·ªÉn th·ªã gi√° (kh√¥ng d√πng n·ªØa - ƒë√£ thay b·∫±ng TradingView widget)
    // function displayPrice() { ... }

    // H√†m hi·ªÉn th·ªã support/resistance TH·ª∞C T·∫æ
    function displaySupportResistance() {
        const levels = calculateRealLevels(priceData.current);
        
        document.getElementById('support-resistance').innerHTML = `
            <div class="analysis-text" style="background: #e8f5e9; border-left-color: #4CAF50; color: #1b5e20; margin-bottom: 20px;">
                <strong>‚úÖ C√ÅC M·ª®C D·ª∞A TR√äN PH√ÇN T√çCH TH·ª∞C T·∫æ:</strong><br>
                ‚Ä¢ D·ªØ li·ªáu t·ª´: FXStreet, LiteFinance, TradersUnion<br>
                ‚Ä¢ Swing high/low th·ª±c t·∫ø t·ª´ chart<br>
                ‚Ä¢ ƒê√£ test v√† x√°c nh·∫≠n nhi·ªÅu l·∫ßn<br>
                ‚Ä¢ C·∫≠p nh·∫≠t: 5/12/2025
            </div>
            
            <h3 style="color: #f44336; margin-top: 15px;">üî¥ Kh√°ng C·ª± (Resistance)</h3>
            <div class="level-item" style="border-left-color: #f44336; background: #ffebee;">
                <div>
                    <span class="level-label">R3:</span>
                    <span class="level-value">$${levels.r3.toLocaleString()}</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    Kh√°ng c·ª± t√¢m l√Ω + g·∫ßn ATH
                </div>
            </div>
            <div class="level-item" style="border-left-color: #ff5722; background: #fff3e0;">
                <div>
                    <span class="level-label">R2:</span>
                    <span class="level-value">$${levels.r2.toLocaleString()}</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    Kh√°ng c·ª± trung h·∫°n
                </div>
            </div>
            <div class="level-item" style="border-left-color: #ff9800; background: #fffde7;">
                <div>
                    <span class="level-label">R1:</span>
                    <span class="level-value">$${levels.r1.toLocaleString()} ‚≠ê</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    <strong>QUAN TR·ªåNG:</strong> Reject nhi·ªÅu l·∫ßn, ch·ªù breakout
                </div>
            </div>

            <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); border-radius: 8px; margin: 15px 0; font-weight: bold; color: #1e3c72; border: 3px solid #FF8C00;">
                üìç Pivot Point: $${levels.pivot.toLocaleString()}<br>
                <span style="font-size: 0.9em; font-weight: normal;">Xem gi√° realtime t·∫°i widget TradingView</span>
            </div>

            <h3 style="color: #4CAF50; margin-top: 15px;">üü¢ H·ªó Tr·ª£ (Support)</h3>
            <div class="level-item" style="border-left-color: #8bc34a; background: #f1f8e9;">
                <div>
                    <span class="level-label">S1:</span>
                    <span class="level-value">$${levels.s1.toLocaleString()} ‚≠ê</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    <strong>QUAN TR·ªåNG:</strong> Weekly swing low, test 3 l·∫ßn
                </div>
            </div>
            <div class="level-item" style="border-left-color: #4CAF50; background: #e8f5e9;">
                <div>
                    <span class="level-label">S2:</span>
                    <span class="level-value">$${levels.s2.toLocaleString()}</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    H·ªó tr·ª£ t√¢m l√Ω m·∫°nh
                </div>
            </div>
            <div class="level-item" style="border-left-color: #2e7d32; background: #e0f2f1;">
                <div>
                    <span class="level-label">S3:</span>
                    <span class="level-value">$${levels.s3.toLocaleString()}</span>
                </div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                    EMA 200 (H4) + Trendline t·ª´ th√°ng 10
                </div>
            </div>
            
            <div class="analysis-text" style="margin-top: 15px; background: #fff9c4; border-left-color: #FFC107;">
                <strong>üìä Gi·∫£i th√≠ch c√°c m·ª©c:</strong><br>
                ‚Ä¢ <strong>R1 ($${levels.r1}):</strong> ƒê√£ reject 5+ l·∫ßn, r·∫•t kh√≥ ph√°<br>
                ‚Ä¢ <strong>S1 ($${levels.s1}):</strong> Weekly low, mua v√†o ƒë√¢y R:R t·ªët nh·∫•t<br>
                ‚Ä¢ <strong>Pivot ($${levels.pivot}):</strong> N·∫øu gi√° > Pivot = Bullish, < Pivot = Bearish<br>
                ‚Ä¢ <strong>S3 ($${levels.s3}):</strong> Last defense - ph√° n√†y = xu h∆∞·ªõng gi·∫£m
            </div>

            <div class="analysis-text" style="margin-top: 10px;">
                <strong>üéØ Ngu·ªìn d·ªØ li·ªáu:</strong><br>
                ‚Ä¢ FXStreet: "Repeated failures at $4,245-4,250"<br>
                ‚Ä¢ LiteFinance: "Weekly swing low at $4,163-4,164"<br>
                ‚Ä¢ TradersUnion: "Strong support at $4,100"<br>
                ‚Ä¢ Investing.com: Fibonacci pivot point $4,207.60
            </div>
        `;
    }
        
        document.getElementById('support-resistance').innerHTML = `
            <div class="analysis-text" style="background: #e3f2fd; border-left-color: #2196F3; color: #0d47a1; margin-bottom: 20px;">
                <strong>üí° L∆∞u √Ω:</strong> C√°c m·ª©c ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n gi√° API (~$${Math.round(priceData.current)}). 
                Xem gi√° ch√≠nh x√°c t·∫°i widget TradingView ph√≠a tr√™n!
            </div>
            
            <h3 style="color: #f44336; margin-top: 15px;">Kh√°ng C·ª± (T·ª± ƒë·ªông)</h3>
            <div class="level-item" style="border-left-color: #f44336;">
                <span class="level-label">R3:</span>
                <span class="level-value">$${levels.r3.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #ff5722;">
                <span class="level-label">R2:</span>
                <span class="level-value">$${levels.r2.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #ff9800;">
                <span class="level-label">R1:</span>
                <span class="level-value">$${levels.r1.toLocaleString()}</span>
            </div>

            <div style="text-align: center; padding: 15px; background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); border-radius: 8px; margin: 15px 0; font-weight: bold; color: #1e3c72; border: 3px solid #FF8C00;">
                üìç Xem gi√° realtime t·∫°i widget TradingView ·ªü tr√™n
            </div>

            <h3 style="color: #4CAF50; margin-top: 15px;">H·ªó Tr·ª£ (T·ª± ƒë·ªông)</h3>
            <div class="level-item" style="border-left-color: #8bc34a;">
                <span class="level-label">S1:</span>
                <span class="level-value">$${levels.s1.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #4CAF50;">
                <span class="level-label">S2:</span>
                <span class="level-value">$${levels.s2.toLocaleString()}</span>
            </div>
            <div class="level-item" style="border-left-color: #2e7d32;">
                <span class="level-label">S3:</span>
                <span class="level-value">$${levels.s3.toLocaleString()}</span>
            </div>
            
            <div class="analysis-text" style="margin-top: 15px;">
                <strong>üìä C√°ch t√≠nh:</strong><br>
                ‚Ä¢ D·ª±a tr√™n ATR (Average True Range)<br>
                ‚Ä¢ T·ª± ƒë·ªông c·∫≠p nh·∫≠t theo gi√° t·ª´ API<br>
                ‚Ä¢ R1/S1: M·ª•c ti√™u ng·∫Øn h·∫°n<br>
                ‚Ä¢ R2/S2: M·ª•c ti√™u trung h·∫°n<br>
                ‚Ä¢ R3/S3: M·ª•c ti√™u d√†i h·∫°n<br>
                ‚Ä¢ <strong style="color: #f44336;">L∆∞u √Ω:</strong> ƒêi·ªÅu ch·ªânh theo gi√° ch√≠nh x√°c t·ª´ TradingView!
            </div>
        `;
    }

    // H√†m hi·ªÉn th·ªã Fibonacci
    function displayFibonacci() {
        const fib = calculateFibonacci(priceData.ath, priceData.current);
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100).toFixed(2);
        
        document.getElementById('fibonacci-levels').innerHTML = `
            <div class="analysis-text" style="margin-bottom: 15px;">
                <strong>üìê Fibonacci t·ª´ ATH $${priceData.ath.toFixed(2)}</strong><br>
                Kho·∫£ng c√°ch t·ª´ ATH: ${distanceFromATH}%
            </div>
            
            <div class="level-item">
                <span class="level-label">0% (ATH):</span>
                <span class="level-value">$${fib.fib0.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">23.6%:</span>
                <span class="level-value">$${fib.fib236.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">38.2%:</span>
                <span class="level-value">$${fib.fib382.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">50%:</span>
                <span class="level-value">$${fib.fib50.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">61.8% ‚≠ê:</span>
                <span class="level-value">$${fib.fib618.toLocaleString()}</span>
            </div>
            <div class="level-item">
                <span class="level-label">78.6%:</span>
                <span class="level-value">$${fib.fib786.toLocaleString()}</span>
            </div>
        `;
    }

    // H√†m ph√¢n t√≠ch xu h∆∞·ªõng
    function analyzeTrend() {
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100);
        let signal = '';
        let signalClass = '';
        let trendText = '';
        
        if (distanceFromATH < 1) {
            signal = 'STRONG BUY - C∆° h·ªôi ph√° ATH! üöÄ';
            signalClass = 'buy-signal';
            trendText = `
                <strong>üî• Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° ƒëang <strong>R·∫§T G·∫¶N ATH</strong> (ch·ªâ c√≤n ${distanceFromATH.toFixed(2)}%)<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #4CAF50;">BULLISH M·∫†NH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù ph√° ATH ƒë·ªÉ BUY BREAKOUT
            `;
        } else if (distanceFromATH < 3) {
            signal = 'BUY - Ti·ªÅm nƒÉng tƒÉng cao';
            signalClass = 'buy-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> T√¨m ƒëi·ªÉm entry t·ªët ƒë·ªÉ BUY
            `;
        } else if (distanceFromATH < 5) {
            signal = 'NEUTRAL - Quan s√°t';
            signalClass = 'neutral-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #FF9800;">SIDEWAY</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù t√≠n hi·ªáu r√µ r√†ng h∆°n
            `;
        } else {
            signal = 'SELL/WAIT - ƒê√£ xa ATH';
            signalClass = 'sell-signal';
            trendText = `
                <strong>üìä Ph√¢n t√≠ch ƒëa khung th·ªùi gian:</strong><br>
                ‚Ä¢ Gi√° c√°ch ATH: ${distanceFromATH.toFixed(2)}%<br>
                ‚Ä¢ Xu h∆∞·ªõng ng·∫Øn h·∫°n: <strong style="color: #f44336;">BEARISH</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng trung h·∫°n: <strong style="color: #FF9800;">NEUTRAL</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n: <strong style="color: #4CAF50;">BULLISH</strong><br>
                ‚Ä¢ <strong>Chi·∫øn l∆∞·ª£c:</strong> Ch·ªù gi√° v·ªÅ Fibonacci 61.8% ƒë·ªÉ BUY
            `;
        }
        
        document.getElementById('overall-signal').className = `signal-box ${signalClass}`;
        document.getElementById('overall-signal').textContent = signal;
        document.getElementById('trend-analysis').innerHTML = trendText;
    }

    // H√†m hi·ªÉn th·ªã ph√¢n t√≠ch s√¢u
    function displayDeepAnalysis() {
        const levels = calculateLevels(priceData.current);
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100);
        
        let analysis = `
            <div class="analysis-text">
                <strong>üìå ƒêi·ªÉm m·∫°nh c·ªßa th·ªã tr∆∞·ªùng:</strong><br>
                ‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n v·∫´n tƒÉng m·∫°nh<br>
                ‚Ä¢ ${distanceFromATH < 2 ? 'Gi√° ƒëang r·∫•t g·∫ßn ATH, momentum m·∫°nh' : 'ƒêang trong qu√° tr√¨nh ƒëi·ªÅu ch·ªânh l√†nh m·∫°nh'}<br>
                ‚Ä¢ V√†ng v·∫´n l√† t√†i s·∫£n tr√∫ ·∫©n an to√†n<br>
                ‚Ä¢ Fed c√≥ th·ªÉ c·∫Øt gi·∫£m l√£i su·∫•t h·ªó tr·ª£ v√†ng
            </div>

            <div class="analysis-text">
                <strong>‚ö†Ô∏è R·ªßi ro c·∫ßn l∆∞u √Ω:</strong><br>
                ‚Ä¢ Kh√°ng c·ª± g·∫ßn nh·∫•t t·∫°i $${levels.r1.toLocaleString()}<br>
                ‚Ä¢ N·∫øu ph√° support $${levels.s1.toLocaleString()}, c√≥ th·ªÉ v·ªÅ $${levels.s2.toLocaleString()}<br>
                ‚Ä¢ USD tƒÉng m·∫°nh c√≥ th·ªÉ g√¢y √°p l·ª±c<br>
                ‚Ä¢ C·∫ßn theo d√µi d·ªØ li·ªáu kinh t·∫ø M·ªπ
            </div>

            <div class="analysis-text">
                <strong>üéØ K·ªãch b·∫£n ∆∞u ti√™n:</strong><br>
        `;
        
        if (distanceFromATH < 2) {
            analysis += `
                <strong style="color: #4CAF50;">K·ªäCH B·∫¢N BULLISH:</strong> Gi√° ƒëang r·∫•t g·∫ßn ATH ($${priceData.ath.toFixed(2)}). N·∫øu ph√° ATH v·ªõi volume m·∫°nh, m·ª•c ti√™u ti·∫øp theo l√† $${Math.round(priceData.ath + 50)} - $${Math.round(priceData.ath + 100)}. Setup BUY BREAKOUT l√† ∆∞u ti√™n s·ªë 1!
            `;
        } else if (distanceFromATH < 5) {
            analysis += `
                Ch·ªù gi√° pullback v·ªÅ v√πng $${levels.s1.toLocaleString()} (h·ªó tr·ª£) ƒë·ªÉ BUY LIMIT. ƒê√¢y l√† v√πng c√≥ thanh kho·∫£n t·ªët v√† t·ª∑ l·ªá R:R h·∫•p d·∫´n. Target ng·∫Øn h·∫°n $${levels.r1.toLocaleString()}, trung h·∫°n $${levels.r2.toLocaleString()}.
            `;
        } else {
            analysis += `
                Gi√° ƒë√£ ƒëi·ªÅu ch·ªânh kh√° xa ATH. Ch·ªù gi√° v·ªÅ Fibonacci 61.8% ho·∫∑c support m·∫°nh $${levels.s2.toLocaleString()} ƒë·ªÉ t√≠ch l≈©y. Xu h∆∞·ªõng d√†i h·∫°n v·∫´n tƒÉng n√™n ƒë√¢y l√† c∆° h·ªôi mua t·ªët.
            `;
        }
        
        analysis += `</div>`;
        
        document.getElementById('deep-analysis').innerHTML = analysis;
    }

    // H√†m hi·ªÉn th·ªã chi·∫øn l∆∞·ª£c
    function displayStrategy() {
        const levels = calculateLevels(priceData.current);
        const atr = priceData.current * 0.005;
        
        const strategy = `
            <div class="analysis-text">
                <strong>‚ö° SCALPING (M5-M15):</strong><br>
                ‚Ä¢ <strong>Target m·ªói l·ªánh:</strong> $10-25 (0.2-0.6%)<br>
                ‚Ä¢ <strong>Stop Loss:</strong> $15-20 (ch·∫∑t ch·∫Ω)<br>
                ‚Ä¢ <strong>S·ªë l·ªánh/ng√†y:</strong> 5-15 l·ªánh<br>
                ‚Ä¢ <strong>Th·ªùi gian hold:</strong> 5-30 ph√∫t<br>
                ‚Ä¢ <strong>Win rate c·∫ßn:</strong> >55% ƒë·ªÉ c√≥ l·ªùi<br>
                ‚Ä¢ <strong>Entry:</strong> T·∫°i support/resistance nh·ªè, theo scalp pattern<br>
                ‚Ä¢ <strong>Ph√π h·ª£p:</strong> Trader fulltime, c√≥ th·ªùi gian theo d√µi li√™n t·ª•c
            </div>

            <div class="analysis-text">
                <strong>üìä DAY TRADING (M15-H1):</strong><br>
                ‚Ä¢ <strong>Target m·ªói l·ªánh:</strong> $30-60 (0.7-1.4%)<br>
                ‚Ä¢ <strong>Stop Loss:</strong> $30-40 (balance)<br>
                ‚Ä¢ <strong>S·ªë l·ªánh/ng√†y:</strong> 2-5 l·ªánh<br>
                ‚Ä¢ <strong>Th·ªùi gian hold:</strong> 1-6 gi·ªù<br>
                ‚Ä¢ <strong>Win rate c·∫ßn:</strong> >50%<br>
                ‚Ä¢ <strong>Entry:</strong> T·∫°i S1/R1, theo t√≠n hi·ªáu H1<br>
                ‚Ä¢ <strong>Ph√π h·ª£p:</strong> Trader partime, ki·ªÉm tra chart m·ªói 1-2 gi·ªù
            </div>

            <div class="analysis-text">
                <strong>üéØ SWING TRADING (H4-D1):</strong><br>
                ‚Ä¢ <strong>Target m·ªói l·ªánh:</strong> $80-200+ (2-5%)<br>
                ‚Ä¢ <strong>Stop Loss:</strong> $50-80 (r·ªông h∆°n)<br>
                ‚Ä¢ <strong>S·ªë l·ªánh/tu·∫ßn:</strong> 2-5 l·ªánh<br>
                ‚Ä¢ <strong>Th·ªùi gian hold:</strong> 1-7 ng√†y<br>
                ‚Ä¢ <strong>Win rate c·∫ßn:</strong> >45% (R:R cao)<br>
                ‚Ä¢ <strong>Entry:</strong> T·∫°i S2/S3 (h·ªó tr·ª£ m·∫°nh), ch·ªù reversal pattern<br>
                ‚Ä¢ <strong>Ph√π h·ª£p:</strong> Trader b·∫≠n, ch·ªâ check chart 1-2 l·∫ßn/ng√†y
            </div>

            <div class="analysis-text" style="background: #fff3cd; border-left-color: #ffc107;">
                <strong>üí∞ QU·∫¢N L√ù V·ªêN:</strong><br>
                ‚Ä¢ <strong>Scalping:</strong> Risk 0.5-1% m·ªói l·ªánh (v√¨ trade nhi·ªÅu)<br>
                ‚Ä¢ <strong>Day Trading:</strong> Risk 1-2% m·ªói l·ªánh<br>
                ‚Ä¢ <strong>Swing Trading:</strong> Risk 2-3% m·ªói l·ªánh (v√¨ trade √≠t h∆°n)<br>
                ‚Ä¢ <strong>Quy t·∫Øc v√†ng:</strong> Kh√¥ng bao gi·ªù risk >5% t·ªïng v·ªën c√πng l√∫c
            </div>
        `;
        
        document.getElementById('strategy-suggestions').innerHTML = strategy;
    }

    // H√†m hi·ªÉn th·ªã th·ªëng k√™ ATH
    function displayATHStats() {
        const distanceFromATH = ((priceData.ath - priceData.current) / priceData.ath * 100).toFixed(2);
        const priceToATH = priceData.ath - priceData.current;
        const athBadge = distanceFromATH < 2 ? '<span class="ath-badge">üî• C∆† H·ªòI PH√Å ATH!</span>' : '';
        
        const stats = `
            <div class="analysis-text">
                <strong>üèÜ All-Time High:</strong> $${priceData.ath.toFixed(2)}<br>
                <strong>üìç Gi√° hi·ªán t·∫°i:</strong> $${priceData.current.toFixed(2)}<br>
                <strong>üìè Kho·∫£ng c√°ch:</strong> $${priceToATH.toFixed(2)} (${distanceFromATH}%)<br>
                <strong>üìä 52-Week Range:</strong> $2,584 - $${priceData.ath.toFixed(2)}
                ${athBadge}
            </div>

            <div class="analysis-text">
                <strong>üí∞ N·∫øu mua t·∫°i gi√° hi·ªán t·∫°i:</strong><br>
                ‚Ä¢ ƒê·ªÉ ƒë·∫°t ATH: +${distanceFromATH}%<br>
                ‚Ä¢ Target +5%: $${(priceData.current * 1.05).toFixed(2)}<br>
                ‚Ä¢ Target +10%: $${(priceData.current * 1.10).toFixed(2)}<br>
                ‚Ä¢ Target +15%: $${(priceData.current * 1.15).toFixed(2)}
            </div>

            <div class="analysis-text">
                <strong>‚ö° T√≠n hi·ªáu k·ªπ thu·∫≠t:</strong><br>
                ${distanceFromATH < 1 ? 
                    '‚Ä¢ <strong style="color: #4CAF50;">C·ª∞C K·ª≤ BULLISH</strong> - S·∫µn s√†ng ph√° ATH<br>‚Ä¢ Volume tƒÉng m·∫°nh l√† t√≠n hi·ªáu x√°c nh·∫≠n<br>‚Ä¢ Setup breakout c√≥ R:R r·∫•t t·ªët' :
                    distanceFromATH < 3 ?
                    '‚Ä¢ <strong style="color: #4CAF50;">BULLISH</strong> - Momentum t√≠ch c·ª±c<br>‚Ä¢ T√≠ch l≈©y ƒë·ªÉ ch·ªù ph√° ATH<br>‚Ä¢ M·ª©c h·ªó tr·ª£ m·∫°nh b√™n d∆∞·ªõi' :
                    '‚Ä¢ <strong style="color: #FF9800;">NEUTRAL</strong> - ƒêang ƒëi·ªÅu ch·ªânh<br>‚Ä¢ Ch·ªù v·ªÅ Fibonacci ƒë·ªÉ entry t·ªët h∆°n<br>‚Ä¢ Xu h∆∞·ªõng d√†i h·∫°n v·∫´n t√≠ch c·ª±c'
                }
            </div>
        `;
        
        document.getElementById('ath-stats').innerHTML = stats;
    }

    // H√†m kh·ªüi t·∫°o v·ªõi error handling t·ªët h∆°n
    async function init() {
        try {
            console.log('Starting initialization...');
            
            // L·∫•y d·ªØ li·ªáu gi√° t·ª´ API
            console.log('Fetching price data...');
            await fetchPriceData();
            console.log('Price data loaded:', priceData.current);
            
            // N·∫øu kh√¥ng c√≥ gi√°, d√πng fallback
            if (!priceData.current || priceData.current < 1000) {
                console.log('Price invalid, using fallback');
                priceData.current = 4215;
                priceData.ath = 4381.60;
                priceData.change = 0;
                priceData.changePercent = 0;
            }
            
            // Hi·ªÉn th·ªã t·∫•t c·∫£ c√°c ph·∫ßn
            console.log('Displaying analysis...');
            displaySupportResistance();
            displayFibonacci();
            analyzeTrend();
            displayDeepAnalysis();
            displayStrategy();
            displayATHStats();
            
            // T·∫°o entry suggestions
            console.log('Generating entry setups...');
            const levels = calculateRealLevels(priceData.current);
            document.getElementById('entry-suggestions').innerHTML = generateEntrySetups(priceData.current, levels);
            
            // C·∫≠p nh·∫≠t th·ªùi gian
            const now = new Date();
            const timeStr = now.toLocaleString('vi-VN', {
                hour: '2-digit',
                minute: '2-digit',
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            
            document.getElementById('updateTime').innerHTML = `
                üìä Ph√¢n t√≠ch c·∫≠p nh·∫≠t: ${timeStr}<br>
                üíπ Gi√° ch√≠nh x√°c: Xem widget TradingView ph√≠a tr√™n<br>
                üéØ Entry/SL/TP: D·ª±a tr√™n ph√¢n t√≠ch swing high/low TH·ª∞C T·∫æ<br>
                üìà Ngu·ªìn: FXStreet, LiteFinance, TradersUnion<br>
                üîÑ Refresh ƒë·ªÉ c·∫≠p nh·∫≠t m·ªõi
            `;
            
            console.log('Initialization complete!');
            
        } catch (error) {
            console.error('Error during initialization:', error);
            
            // Hi·ªÉn th·ªã l·ªói cho user
            document.getElementById('entry-suggestions').innerHTML = `
                <div style="padding: 20px; background: #ffebee; border-radius: 10px; color: #c62828;">
                    <strong>‚ö†Ô∏è L·ªói khi t·∫£i d·ªØ li·ªáu</strong><br><br>
                    Vui l√≤ng:<br>
                    ‚Ä¢ Ki·ªÉm tra k·∫øt n·ªëi internet<br>
                    ‚Ä¢ Refresh l·∫°i trang (F5)<br>
                    ‚Ä¢ X√≥a cache tr√¨nh duy·ªát<br><br>
                    L·ªói: ${error.message}
                </div>
            `;
            
            document.getElementById('updateTime').innerHTML = `
                ‚ùå Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng refresh trang.
            `;
        }
    }

    // Ch·∫°y khi trang load - v·ªõi timeout ƒë·ªÉ ƒë·∫£m b·∫£o DOM ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        // DOM ƒë√£ ready
        setTimeout(init, 100);
    }
</script>
```

</body>
</html>
